{"version":3,"file":"main.77dfa884.iframe.bundle.js","mappings":";;;;;;;AAiCA;AACA;;;;;;;;;;AAaA;;;;;;;;AASA;;;AAMA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BA;;;;;;ACIA;;AAIA;AACA;AAGA;;;;;;;;ACFA;AACA;;;AAKA;;;;;AAOA;;;;;;;;;AAWA;;;;;;AAMA;AACA;AACA;AAGA;;;;;ACzCA;;;;;;;;;AAWA;;;AAGA;AAaA;;;;;;;;;;ACpBA;AACA;;;AAKA;;;;;AAOA;;;;;;;;;AAWA;;;;;;AAMA;AACA;AACA;AAGA;;;;;AC1CA;;;;;;;;;AAWA;;;AAGA;;;;;;;AAeA;;;;;;AC9BA;AACA;;AAIA;;;;;AAKA;AAGA;;;;;ACDA;AACA;AACA;AAGA;;;AAGA;AAGA;;;;;AAKA;;AAEA;;;;;AAMA;;;;;;;AASA;;AAIA;;;;AAMA;;;;;;;;ACjDA;AACA;;;AAKA;;;;;AAOA;;;;;;;;;AAWA;;;;;;AAMA;AACA;AACA;AAGA;;;;AChDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYA;;;;;;;;;AAWA;;;;;;;;;;;;AAoBA;;;;;ACzBA;AACA;AACA;AAGA;;;AAGA;AAGA;;;;;;AAMA;;AAEA;;;;;AAMA;;;;;;;AASA;;AAIA;AACA;AAGA;;;;ACtDA;;;AAKA;;;;;;ACEA;;ACfA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;;;;;;;;;;;;;;;;;;;;AAoBA;;;;;;;;;AASA;;;;;;;;;;;;;;AAcA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;;;;AAIA;;;;;;;AAOA;;;;;;;;;AASA;AACA;;;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;;;;;;;;;;;;;AAcA;AACA;;;;;;AAMA;;;;;;;AAOA;AACA;;;;;;;;;AASA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;;;;;;;;;;;;;AAcA;AACA;;;;;;AAMA;;;;;;;AAOA;AACA;;;;;;;;;AASA;AACA;;;;;;;;;;;;;AAaA;;;AAGA;;;;;AAKA;AACA;;;;AAIA;AACA;;;;;;;;;;;;AAYA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA","sources":["webpack://think-single-editor/./src/components/button.tsx","webpack://think-single-editor/./src/components/color-picker/style.tsx","webpack://think-single-editor/./src/components/divider.tsx","webpack://think-single-editor/./src/extensions/code-block/code-block-view.tsx","webpack://think-single-editor/./src/extensions/excalidraw/excalidraw-view.tsx","webpack://think-single-editor/./src/extensions/excalidraw/menu/modal.tsx","webpack://think-single-editor/./src/extensions/flow/flow-view.tsx","webpack://think-single-editor/./src/extensions/flow/menu/modal.tsx","webpack://think-single-editor/./src/extensions/iframe/iframe-view.tsx","webpack://think-single-editor/./src/extensions/mention/mention-menu-view.tsx","webpack://think-single-editor/./src/extensions/mind/mind-view.tsx","webpack://think-single-editor/./src/extensions/mind/menu/style.tsx","webpack://think-single-editor/./src/extensions/mind/menu/modal.tsx","webpack://think-single-editor/./src/extensions/slash/slash-menu-view.tsx","webpack://think-single-editor/./src/extensions/status/status-view.tsx","webpack://think-single-editor/./src/icons/icon.tsx","webpack://think-single-editor/./src/styles/editor.ts"],"sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\ntype Size = \"small\" | \"normal\" | \"large\";\nconst SizeMap: Record<Size, number> = {\n  small: 4,\n  normal: 6,\n  large: 10\n};\n\ntype ButtonType = \"primary\" | \"normal\";\n\ntype Props = {\n  active?: boolean;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n  size?: Size;\n  type?: ButtonType;\n  onClick?: () => void;\n  style?: React.CSSProperties;\n};\n\ntype StyledButtonProps = Pick<Props, \"active\" | \"size\"> & {\n  buttonType: ButtonType;\n};\n\nconst StyledButton = styled.button<StyledButtonProps>`\n  margin: 0;\n\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n\n  padding: ${props => (props.size ? SizeMap[props.size] : 6)}px;\n  background: ${props =>\n    props.buttonType !== \"normal\"\n      ? props.theme[props.buttonType!]\n      : \"transparent\"};\n  border: 0 solid transparent;\n  border-radius: 2px;\n\n  box-shadow: none;\n  outline: none;\n\n  user-select: none;\n  cursor: pointer;\n\n  color: ${props =>\n    props.buttonType === \"normal\" ? \"hsl(214deg 11% 12% / 80%)\" : \"#fff\"};\n  font-size: 14px;\n  font-weight: 600;\n\n  vertical-align: middle;\n  white-space: nowrap;\n\n  &:hover {\n    background-color: ${props =>\n      props.buttonType === \"normal\"\n        ? \"rgb(46 50 56 / 15%)\"\n        : props.theme[props.buttonType!]};\n  }\n\n  ${props =>\n    props.active &&\n    `color: rgb(51 112 255);\n      background: rgb(51 112 255 / 10%);\n      `}\n`;\n\nexport const Button: React.FC<React.PropsWithChildren<Props>> = ({\n  active,\n  disabled,\n  icon,\n  size = \"normal\",\n  type = \"normal\",\n  onClick,\n  style,\n  children\n}) => {\n  return (\n    <StyledButton\n      size={size}\n      active={active}\n      buttonType={type}\n      style={style}\n      disabled={disabled}\n      onClick={onClick}>\n      {icon || children}\n    </StyledButton>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const StyledEmptyWrap = styled.div`\n  display: flex;\n  cursor: pointer;\n  border: 1px solid transparent;\n  flex-wrap: nowrap;\n\n  &:hover {\n    background-color: var(--semi-color-fill-1);\n  }\n\n  > span:first-child {\n    position: relative;\n    display: block;\n    width: 20px;\n    height: 20px;\n    margin: 0 8px 0 1px;\n    border: 1px solid #e8e8e8;\n    border-radius: 2px;\n\n    &::after {\n      position: absolute;\n      top: 8px;\n      left: 0;\n      display: block;\n      width: 17px;\n      height: 0;\n      content: \"\";\n      transform: rotate(45deg);\n      border-bottom: 2px solid #ff5151;\n    }\n  }\n`;\n\nexport const StyledColorWrap = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 8px;\n`;\n\nexport const StyledColorItemWrap = styled.div`\n  display: flex;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  justify-content: center;\n  align-items: center;\n\n  &:nth-of-type(n + 11) {\n    margin-top: 4px;\n  }\n\n  &:hover {\n    border-color: rgb(193 199 208);\n  }\n\n  > span {\n    display: block;\n    width: 20px;\n    height: 20px;\n    border: 1px solid var(--semi-color-border);\n    border-radius: 2px;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledDiv = styled.div`\n  display: inline-block;\n  width: 1px;\n  height: 18px;\n  background: #dee0e3;\n`;\n\nexport const _Divider = ({ vertical = false, margin = 2 }) => {\n  return (\n    <StyledDiv\n      style={{\n        margin: `0 ${margin}px`,\n        transform: `rotate(${vertical ? 90 : 0}deg)`\n      }}\n    />\n  );\n};\n\nexport const Divider = React.memo(_Divider, (prevProps, nextProps) => {\n  return prevProps.vertical === nextProps.vertical;\n});\n","import React, { useRef, useCallback, useMemo } from \"react\";\nimport { NodeViewWrapper, NodeViewContent, NodeViewProps } from \"@tiptap/react\";\nimport styled from \"styled-components\";\n\nimport { IconCopy } from \"../../icons\";\nimport { Tooltip, Button, Select } from \"../../components\";\nimport { copy } from \"../../utilities\";\n\nconst StyledToolbar = styled.div`\n  display: flex;\n  justify-content: space-between;\n\n  font-size: 0;\n  padding: 6px 12px;\n  border: 1px solid ${props => props.theme.codeBlockBorderColor};\n  border-bottom: 0;\n`;\n\nconst StyledContent = styled.div`\n  border: 1px solid ${props => props.theme.codeBlockBorderColor};\n`;\n\nexport const CodeBlockView: React.FC<NodeViewProps> = ({\n  editor,\n  node: { attrs },\n  updateAttributes,\n  extension\n}) => {\n  const isEditable = editor.isEditable;\n  const { language: defaultLanguage } = attrs;\n  const $container = useRef<HTMLPreElement>(null);\n\n  const languages = useMemo(\n    () => [\n      {\n        label: \"auto\",\n        value: \"auto\"\n      },\n      ...extension.options.lowlight.listLanguages().map((lang: string) => ({\n        label: lang,\n        value: lang\n      }))\n    ],\n    [extension]\n  );\n\n  const getPopupContainer = useCallback(\n    () => (editor ? editor.options.element : document.body) as HTMLElement,\n    [editor]\n  );\n\n  return (\n    <NodeViewWrapper style={{ position: \"relative\" }}>\n      <StyledToolbar>\n        <Select\n          editor={editor}\n          value={defaultLanguage || \"auto\"}\n          options={languages}\n          onChange={value => updateAttributes({ language: value })}\n          disabled={!isEditable}\n          getPopupContainer={getPopupContainer}></Select>\n        <Tooltip title=\"复制\" editor={editor}>\n          <Button\n            size=\"small\"\n            icon={<IconCopy />}\n            onClick={() => copy($container?.current?.innerText as string)}\n          />\n        </Tooltip>\n      </StyledToolbar>\n      <StyledContent>\n        <pre ref={$container}>\n          <NodeViewContent as=\"code\" />\n        </pre>\n      </StyledContent>\n    </NodeViewWrapper>\n  );\n};\n","import { NodeViewWrapper, NodeViewProps } from \"@tiptap/react\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport VisibilitySensor from \"react-visibility-sensor\";\nimport { ExportOpts } from \"@excalidraw/excalidraw/types/types\";\nimport deepEqual from \"deep-equal\";\nimport styled from \"styled-components\";\n\nimport { IconExcalidraw, IconZoomIn, IconZoomOut } from \"../../icons\";\nimport { Resizable, Space, Loading, Button, Tooltip } from \"../../components\";\nimport { MAX_ZOOM, MIN_ZOOM, ZOOM_STEP } from \"../../constants\";\nimport { clamp, svgToDataURI } from \"../../utilities\";\n\nconst StyledContainer = styled.div`\n  position: relative;\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n  overflow: visible;\n  line-height: 0;\n\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n\n  overflow: hidden;\n`;\n\nconst StyledTitleContainer = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  z-index: 2;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledToolbarContainer = styled.div`\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  z-index: 2;\n  padding: 2px 4px;\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n  box-shadow: ${props => props.theme.boxShadow};\n`;\n\nconst _ExcalidrawView: React.FC<NodeViewProps> = ({\n  editor,\n  getPos,\n  node,\n  updateAttributes\n}) => {\n  const exportToSvgRef = useRef<\n    | ((\n        arg: Omit<ExportOpts, \"getDimensions\"> & {\n          exportPadding?: number | undefined;\n        }\n      ) => Promise<SVGSVGElement>)\n    | null\n  >(null);\n  const { data, width, height } = node.attrs;\n  const [svg, setSvg] = useState<string | null>(null);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [visible, toggleVisible] = useState(false);\n  const [zoom, setZoom] = useState(0.85);\n\n  const changeZoom = useCallback((type: \"in\" | \"out\") => {\n    return () => {\n      setZoom(currentZoom => {\n        const nextZoom = clamp(\n          type === \"out\" ? currentZoom - ZOOM_STEP : currentZoom + ZOOM_STEP,\n          MIN_ZOOM,\n          MAX_ZOOM\n        );\n        return nextZoom;\n      });\n    };\n  }, []);\n\n  const onResize = useCallback(\n    size => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes]\n  );\n\n  const onViewportChange = useCallback(\n    visible => {\n      if (visible) {\n        toggleVisible(true);\n      }\n    },\n    [toggleVisible]\n  );\n\n  useEffect(() => {\n    import(\"@excalidraw/excalidraw\")\n      .then(res => {\n        console.log(res);\n        // @ts-ignore\n        exportToSvgRef.current = res.exportToSvg;\n      })\n      .catch(setError)\n      .finally(() => toggleLoading(false));\n  }, [toggleLoading, data]);\n\n  useEffect(() => {\n    const setContent = async () => {\n      if (loading || error || !visible || !data) return;\n\n      // @ts-ignore\n      const svg: SVGElement = await exportToSvgRef.current(JSON.parse(data));\n\n      svg.setAttribute(\"width\", \"100%\");\n      svg.setAttribute(\"height\", \"100%\");\n      svg.setAttribute(\"display\", \"block\");\n\n      setSvg(svgToDataURI(svg?.outerHTML));\n    };\n\n    setContent();\n  }, [data, loading, error, visible]);\n\n  return (\n    <NodeViewWrapper>\n      <VisibilitySensor onChange={onViewportChange}>\n        <Resizable\n          editor={editor}\n          getPos={getPos}\n          width={width}\n          height={height}\n          minWidth={\"100%\"}\n          onResizeStop={onResize}>\n          <StyledContainer>\n            {error && (\n              <div\n                style={{\n                  height: \"100%\",\n                  maxHeight: \"100%\",\n                  overflow: \"hidden\",\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\"\n                }}>\n                <span>{error.message || error}</span>\n              </div>\n            )}\n\n            {loading && <Loading></Loading>}\n\n            {!loading && !error && visible && (\n              <div\n                style={{\n                  height: \"100%\",\n                  maxHeight: \"100%\",\n                  overflow: \"hidden\",\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  transform: `scale(${zoom})`,\n                  transition: `transform ease-in-out .2s`\n                }}>\n                {svg ? <img src={svg} /> : null}\n              </div>\n            )}\n\n            <StyledTitleContainer>\n              <Space>\n                <StyledIconContainer>\n                  <IconExcalidraw />\n                </StyledIconContainer>\n                绘图\n              </Space>\n            </StyledTitleContainer>\n\n            <StyledToolbarContainer>\n              <Space spacing={4}>\n                <Tooltip editor={editor} title=\"放大\">\n                  <Button\n                    size=\"small\"\n                    icon={<IconZoomIn />}\n                    onClick={changeZoom(\"in\")}\n                  />\n                </Tooltip>\n\n                <Tooltip editor={editor} title=\"缩小\">\n                  <Button\n                    size=\"small\"\n                    icon={<IconZoomOut />}\n                    onClick={changeZoom(\"out\")}\n                  />\n                </Tooltip>\n              </Space>\n            </StyledToolbarContainer>\n          </StyledContainer>\n        </Resizable>\n      </VisibilitySensor>\n    </NodeViewWrapper>\n  );\n};\n\nexport const ExcalidrawView = React.memo(\n  _ExcalidrawView,\n  (prevProps, nextProps) => {\n    if (deepEqual(prevProps.node.attrs.svg, nextProps.node.attrs)) {\n      return true;\n    }\n    return false;\n  }\n);\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Editor } from \"@tiptap/core\";\nimport styled from \"styled-components\";\n\nimport { Modal, Loading, Button, Space } from \"../../../components\";\nimport { IconExcalidraw } from \"../../../icons\";\n\nconst StyledHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 -24px;\n  padding: 8px 12px;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledRenderContainer = styled.div`\n  height: 100%;\n  margin: 0 -24px;\n  border-top: 1px solid ${props => props.theme.borderColor};\n`;\n\ntype IProps = {\n  editor: Editor;\n  data: {\n    elements: unknown[];\n    appState: { isLoading: false };\n    files: null;\n  } | null;\n  onClose: () => void;\n};\n\nexport const ExcalidrawSettingModal: React.FC<IProps> = ({\n  editor,\n  data: outInData,\n  onClose\n}) => {\n  const [Excalidraw, setExcalidraw] = useState(null);\n  const [data, setData] = useState({});\n  const [initialData, setInitialData] = useState({\n    elements: [],\n    appState: { isLoading: false },\n    files: null\n  });\n  const [visible, toggleVisible] = useState(true);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const renderEditor = useCallback(\n    div => {\n      if (!div) return;\n\n      import(\"@excalidraw/excalidraw\")\n        .then(res => {\n          // @ts-ignore\n          setExcalidraw(res.Excalidraw);\n        })\n        .catch(setError)\n        .finally(() => toggleLoading(false));\n    },\n    [toggleLoading]\n  );\n\n  const renderExcalidraw = useCallback(app => {\n    setTimeout(() => {\n      app.refresh();\n    });\n  }, []);\n\n  const onChange = useCallback((elements, appState, files) => {\n    // excalidraw 导出的是 {}，实际上应该是 []\n    // appState.collaborators = [];\n    setData({\n      elements,\n      appState: { isLoading: false },\n      files\n    });\n  }, []);\n\n  const save = useCallback(() => {\n    if (!Excalidraw) {\n      toggleVisible(false);\n      onClose();\n      return;\n    }\n\n    editor\n      .chain()\n      .focus()\n      .setExcalidraw({ data: JSON.stringify(data) })\n      .run();\n  }, [Excalidraw, editor, data, toggleVisible, onClose]);\n\n  const saveAndExit = useCallback(() => {\n    save();\n    toggleVisible(false);\n    onClose();\n  }, [save]);\n\n  useEffect(() => {\n    // @ts-ignore\n    outInData && setInitialData(outInData);\n  }, [outInData]);\n\n  return (\n    <Modal\n      centered\n      title=\"绘图\"\n      fullScreen\n      visible={visible}\n      okText=\"保存\"\n      cancelText=\"退出\"\n      motion={false}\n      header={\n        <StyledHeader>\n          <Space>\n            <StyledIconContainer>\n              <IconExcalidraw />\n            </StyledIconContainer>\n            <strong>绘图</strong>\n          </Space>\n          <Space>\n            <Button type=\"primary\" onClick={save}>\n              保存\n            </Button>\n            <Button onClick={saveAndExit}>保存并退出</Button>\n          </Space>\n        </StyledHeader>\n      }\n      footer={null}>\n      <StyledRenderContainer>\n        {loading && <Loading></Loading>}\n        {error && <span>{(error && error.message) || \"未知错误\"}</span>}\n        <div style={{ width: \"100%\", height: \"100%\" }} ref={renderEditor}>\n          {!loading && !error && Excalidraw ? (\n            // @ts-ignore\n            <Excalidraw\n              ref={renderExcalidraw}\n              onChange={onChange}\n              langCode=\"zh-CN\"\n              initialData={initialData}\n            />\n          ) : null}\n        </div>\n      </StyledRenderContainer>\n    </Modal>\n  );\n};\n","import { NodeViewWrapper, NodeViewProps } from \"@tiptap/react\";\nimport React, { useCallback, useState } from \"react\";\nimport VisibilitySensor from \"react-visibility-sensor\";\nimport deepEqual from \"deep-equal\";\nimport styled from \"styled-components\";\n\nimport { IconFlow, IconZoomIn, IconZoomOut } from \"../../icons\";\nimport { Resizable, Space, Button, Tooltip } from \"../../components\";\nimport { MAX_ZOOM, MIN_ZOOM, ZOOM_STEP } from \"../../constants\";\nimport { clamp } from \"../../utilities\";\n\nconst StyledContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n  line-height: 0;\n\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n\n  overflow: auto;\n`;\n\nconst StyledTitleContainer = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  z-index: 2;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledToolbarContainer = styled.div`\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  z-index: 2;\n  padding: 2px 4px;\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n  box-shadow: ${props => props.theme.boxShadow};\n`;\n\nconst _FlowView: React.FC<NodeViewProps> = ({\n  editor,\n  getPos,\n  node,\n  updateAttributes\n}) => {\n  const { width, height, svg } = node.attrs;\n  const [visible, toggleVisible] = useState(false);\n  const [zoom, setZoom] = useState(0.85);\n\n  const changeZoom = useCallback((type: \"in\" | \"out\") => {\n    return () => {\n      setZoom(currentZoom => {\n        const nextZoom = clamp(\n          type === \"out\" ? currentZoom - ZOOM_STEP : currentZoom + ZOOM_STEP,\n          MIN_ZOOM,\n          MAX_ZOOM\n        );\n        return nextZoom;\n      });\n    };\n  }, []);\n\n  const onResize = useCallback(\n    size => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes]\n  );\n\n  const onViewportChange = useCallback(\n    visible => {\n      if (visible) {\n        toggleVisible(true);\n      }\n    },\n    [toggleVisible]\n  );\n\n  return (\n    <NodeViewWrapper>\n      <VisibilitySensor onChange={onViewportChange}>\n        {/* <div style={{ height: 240 }}>1</div> */}\n        <Resizable\n          editor={editor}\n          getPos={getPos}\n          width={width}\n          height={height}\n          minWidth={\"100%\"}\n          onResizeStop={onResize}>\n          <StyledTitleContainer>\n            <Space>\n              <StyledIconContainer>\n                <IconFlow />\n              </StyledIconContainer>\n              流程图\n            </Space>\n          </StyledTitleContainer>\n\n          <StyledToolbarContainer>\n            <Space spacing={4}>\n              <Tooltip editor={editor} title=\"放大\">\n                <Button\n                  size=\"small\"\n                  icon={<IconZoomIn />}\n                  onClick={changeZoom(\"in\")}\n                />\n              </Tooltip>\n\n              <Tooltip editor={editor} title=\"缩小\">\n                <Button\n                  size=\"small\"\n                  icon={<IconZoomOut />}\n                  onClick={changeZoom(\"out\")}\n                />\n              </Tooltip>\n            </Space>\n          </StyledToolbarContainer>\n\n          <StyledContainer>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n\n                width: \"100%\",\n                minHeight: \"100%\"\n              }}>\n              {visible && (\n                <div\n                  style={{\n                    transform: `scale(${zoom})`,\n                    transition: `transform ease-in-out .2s`\n                  }}>\n                  <img src={svg} />\n                </div>\n              )}\n            </div>\n          </StyledContainer>\n        </Resizable>\n      </VisibilitySensor>\n    </NodeViewWrapper>\n  );\n};\n\nexport const FlowView = React.memo(_FlowView, (prevProps, nextProps) => {\n  if (deepEqual(prevProps.node.attrs, nextProps.node.attrs)) {\n    return true;\n  }\n  return false;\n});\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Editor } from \"@tiptap/core\";\nimport styled from \"styled-components\";\n\nimport { Modal, Space, Button } from \"../../../components\";\nimport { IconMind } from \"../../../icons\";\n\nconst StyledHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 -24px;\n  padding: 8px 12px;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledRenderContainer = styled.div`\n  height: 100%;\n  margin: 0 -24px;\n  border-top: 1px solid ${props => props.theme.borderColor};\n\n  iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n  }\n`;\n\ntype IProps = {\n  editor: Editor;\n  data: string;\n  onClose: () => void;\n};\n\nexport const FlowSettingModal: React.FC<IProps> = ({\n  editor,\n  data: outInXml,\n  onClose\n}) => {\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const exitRef = useRef(false);\n  const xmlRef = useRef(\"\");\n  const [visible, toggleVisible] = useState(true);\n\n  const postMessage = useCallback(msg => {\n    if (!iframeRef.current) return;\n    iframeRef.current?.contentWindow?.postMessage(JSON.stringify(msg), \"*\");\n  }, []);\n\n  const save = useCallback(() => {\n    exitRef.current = false;\n    postMessage({\n      action: \"export\",\n      format: \"svg\",\n      xml: xmlRef.current,\n      spinKey: \"export\"\n    });\n  }, []);\n\n  const saveAndExit = useCallback(() => {\n    exitRef.current = true;\n    postMessage({\n      action: \"export\",\n      format: \"svg\",\n      xml: xmlRef.current,\n      spinKey: \"export\"\n    });\n  }, []);\n\n  useEffect(() => {\n    const initializeEditor = () => {\n      postMessage({\n        action: \"load\",\n        autosave: 1,\n        modified: \"unsavedChanges\",\n        xml: outInXml\n      });\n    };\n\n    const handleMessage = msg => {\n      const data = JSON.parse(msg.data);\n\n      if (data.event == \"init\") {\n        initializeEditor();\n      } else if (data.event == \"autosave\") {\n        xmlRef.current = data.xml;\n      } else if (data.event == \"export\") {\n        editor\n          .chain()\n          .focus()\n          .setFlow({ svg: data.data, xml: xmlRef.current })\n          .run();\n\n        if (exitRef.current) {\n          toggleVisible(false);\n          onClose();\n        }\n      }\n    };\n\n    window.addEventListener(\"message\", handleMessage);\n\n    return () => {\n      window.removeEventListener(\"message\", handleMessage);\n    };\n  }, [outInXml]);\n\n  return (\n    <Modal\n      centered\n      title=\"流程图\"\n      fullScreen\n      visible={visible}\n      okText=\"保存\"\n      cancelText=\"退出\"\n      motion={false}\n      header={\n        <StyledHeader>\n          <Space>\n            <StyledIconContainer>\n              <IconMind />\n            </StyledIconContainer>\n            <strong>流程图</strong>\n          </Space>\n\n          <Space>\n            <Button type=\"primary\" onClick={save}>\n              保存\n            </Button>\n            <Button onClick={saveAndExit}>保存并退出</Button>\n          </Space>\n        </StyledHeader>\n      }\n      footer={null}>\n      <StyledRenderContainer>\n        <iframe\n          ref={iframeRef}\n          src=\"https://embed.diagrams.net/?proto=json&spin=1&ui=atalas&libraries=1&noSaveBtn=1&saveAndExit=0&noExitBtn=1\"></iframe>\n      </StyledRenderContainer>\n    </Modal>\n  );\n};\n","import { NodeViewProps, NodeViewWrapper } from \"@tiptap/react\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\n\nimport { Resizable } from \"../../components\";\nimport { NodeSelection } from \"../../prosemirror\";\n\nconst StyledContainer = styled.div`\n  display: flex;\n  height: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  line-height: 0;\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n  flex-direction: column;\n`;\n\nconst StyledEmptyContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  color: ${props => props.theme.greyDark};\n`;\n\nexport const IframeView: React.FC<NodeViewProps> = ({\n  editor,\n  node,\n  updateAttributes,\n  getPos\n}) => {\n  const timerRef = useRef<number>(-1);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const { url, width, height } = node.attrs;\n\n  const onResize = useCallback(\n    size => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes]\n  );\n\n  useEffect(() => {\n    const handler = () => {\n      const isActive = document.activeElement === iframeRef.current;\n\n      if (isActive) {\n        editor.view.dispatch(\n          editor.state.tr.setSelection(\n            NodeSelection.create(editor.state.doc, getPos())\n          )\n        );\n      }\n\n      timerRef.current = requestIdleCallback(handler);\n    };\n\n    timerRef.current = requestIdleCallback(handler);\n\n    return () => {\n      cancelIdleCallback(timerRef.current);\n    };\n  }, [editor, getPos]);\n\n  return (\n    <NodeViewWrapper>\n      <Resizable\n        width={width}\n        height={height}\n        onResizeStop={onResize}\n        editor={editor}\n        getPos={getPos}\n        minWidth={\"100%\"}>\n        <StyledContainer>\n          {url ? (\n            <iframe ref={iframeRef} src={url}></iframe>\n          ) : (\n            <StyledEmptyContainer>\n              <span>请设置外链地址</span>\n            </StyledEmptyContainer>\n          )}\n        </StyledContainer>\n      </Resizable>\n    </NodeViewWrapper>\n  );\n};\n","import { Editor } from \"@tiptap/core\";\nimport React, {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState\n} from \"react\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport styled from \"styled-components\";\n\nimport { User } from \"../../editor/provider\";\nimport { Loading } from \"../../components\";\n\ninterface IProps {\n  editor: Editor;\n  items: User[];\n  command: (command) => void;\n}\n\nconst StyledContainer = styled.div`\n  width: 254px;\n  max-height: 240px;\n  overflow: auto;\n\n  box-shadow: ${props => props.theme.slashMenuBoxshadow};\n  background-color: ${props => props.theme.background};\n  border-radius: ${props => props.theme.borderRadius};\n`;\n\nconst StyledTitle = styled.div`\n  padding: 8px 16px;\n\n  color: ${props => props.theme.slashMenuTitleColor};\n`;\n\nconst StyledItem = styled.div<{ active: boolean }>`\n  display: flex;\n  align-items: center;\n  padding: 8px 16px;\n  height: 32px;\n  color: ${props => props.theme.slashMenuColor};\n\n  background-color: ${props =>\n    props.active ? props.theme.slashMenuHoverBgColor : \"transparent\"};\n\n  cursor: pointer;\n\n  &:hover {\n    background-color: ${props => props.theme.slashMenuHoverBgColor};\n  }\n\n  > div {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst StyledText = styled.div`\n  margin-left: 8px;\n`;\n\nconst StyledImg = styled.img`\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n`;\n\nexport const MentionMenuView: React.FC<IProps> = forwardRef((props, ref) => {\n  const $container = useRef<HTMLDivElement>(null);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const selectItem = index => {\n    const command = props.items[index];\n\n    if (command) {\n      props.command(command);\n    }\n  };\n\n  const upHandler = () => {\n    setSelectedIndex(\n      (selectedIndex + props.items.length - 1) % props.items.length\n    );\n  };\n\n  const downHandler = () => {\n    setSelectedIndex((selectedIndex + 1) % props.items.length);\n  };\n\n  const enterHandler = () => {\n    selectItem(selectedIndex);\n  };\n\n  useEffect(() => setSelectedIndex(0), [props.items]);\n\n  useEffect(() => {\n    if (Number.isNaN(selectedIndex + 1)) return;\n    const el = $container?.current?.querySelector(\n      `.mention-menu-item:nth-of-type(${selectedIndex + 1})`\n    );\n    el && scrollIntoView(el, { behavior: \"smooth\", scrollMode: \"if-needed\" });\n  }, [selectedIndex]);\n\n  useImperativeHandle(ref, () => ({\n    onKeyDown: ({ event }) => {\n      if (event.key === \"ArrowUp\") {\n        upHandler();\n        return true;\n      }\n\n      if (event.key === \"ArrowDown\") {\n        downHandler();\n        return true;\n      }\n\n      if (event.key === \"Enter\") {\n        enterHandler();\n        return true;\n      }\n\n      return false;\n    }\n  }));\n\n  return (\n    <StyledContainer ref={$container}>\n      {props.items.length ? (\n        props.items.map((item, index) => {\n          return (\n            <StyledItem\n              className=\"mention-menu-item\"\n              active={selectedIndex === index}\n              onClick={() => selectItem(index)}>\n              <StyledImg src={item.avatar}></StyledImg>\n              <StyledText>{item.name}</StyledText>\n            </StyledItem>\n          );\n        })\n      ) : (\n        <StyledTitle>没有找到结果</StyledTitle>\n      )}\n    </StyledContainer>\n  );\n});\n\nMentionMenuView.displayName = \"MentionMenuView\";\n\nexport const MentionLoading = () => {\n  return (\n    <StyledContainer>\n      <div\n        style={{\n          height: 32,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        }}>\n        <Loading />\n      </div>\n    </StyledContainer>\n  );\n};\n","import { NodeViewWrapper, NodeViewProps } from \"@tiptap/react\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport VisibilitySensor from \"react-visibility-sensor\";\nimport deepEqual from \"deep-equal\";\nimport styled from \"styled-components\";\n\nimport { IconMind, IconZoomIn, IconZoomOut } from \"../../icons\";\nimport { Resizable, Space, Button, Tooltip } from \"../../components\";\nimport { MAX_ZOOM, MIN_ZOOM, ZOOM_STEP } from \"../../constants\";\nimport { clamp, svgToDataURI } from \"../../utilities\";\n\nconst StyledContainer = styled.div`\n  position: relative;\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n  overflow: visible;\n  line-height: 0;\n\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n\n  overflow: hidden;\n`;\n\nconst StyledTitleContainer = styled.div`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  z-index: 2;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledToolbarContainer = styled.div`\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  z-index: 2;\n  padding: 2px 4px;\n  border: 1px solid ${props => props.theme.borderColor};\n  border-radius: ${props => props.theme.borderRadius};\n  box-shadow: ${props => props.theme.boxShadow};\n`;\n\nconst _MindView: React.FC<NodeViewProps> = ({\n  editor,\n  getPos,\n  node,\n  updateAttributes\n}) => {\n  const { width, height, svg } = node.attrs;\n  const [visible, toggleVisible] = useState(false);\n  const [zoom, setZoom] = useState(1);\n\n  const svgToImgSrc = useMemo(() => svgToDataURI(svg), [svg]);\n\n  const changeZoom = useCallback((type: \"in\" | \"out\") => {\n    return () => {\n      setZoom(currentZoom => {\n        const nextZoom = clamp(\n          type === \"out\" ? currentZoom - ZOOM_STEP : currentZoom + ZOOM_STEP,\n          MIN_ZOOM,\n          MAX_ZOOM\n        );\n        return nextZoom;\n      });\n    };\n  }, []);\n\n  const onResize = useCallback(\n    size => {\n      updateAttributes({ width: size.width, height: size.height });\n    },\n    [updateAttributes]\n  );\n\n  const onViewportChange = useCallback(\n    visible => {\n      if (visible) {\n        toggleVisible(true);\n      }\n    },\n    [toggleVisible]\n  );\n\n  return (\n    <NodeViewWrapper>\n      <VisibilitySensor onChange={onViewportChange}>\n        <Resizable\n          editor={editor}\n          getPos={getPos}\n          width={width}\n          height={height}\n          minWidth={\"100%\"}\n          onResizeStop={onResize}>\n          <StyledContainer>\n            {visible &&\n              (svgToImgSrc ? (\n                <div\n                  style={{\n                    width: \"100%\",\n                    height: \"100%\",\n                    transition: `transform ease-in-out .2s`,\n                    transform: `scale(${zoom})`\n                  }}>\n                  <img\n                    src={svgToImgSrc}\n                    style={{\n                      width: \"100%\",\n                      height: \"100%\"\n                    }}\n                  />\n                </div>\n              ) : null)}\n\n            <StyledTitleContainer>\n              <Space>\n                <StyledIconContainer>\n                  <IconMind />\n                </StyledIconContainer>\n                思维导图\n              </Space>\n            </StyledTitleContainer>\n\n            <StyledToolbarContainer>\n              <Space spacing={4}>\n                <Tooltip editor={editor} title=\"放大\">\n                  <Button\n                    size=\"small\"\n                    icon={<IconZoomIn />}\n                    onClick={changeZoom(\"in\")}\n                  />\n                </Tooltip>\n\n                <Tooltip editor={editor} title=\"缩小\">\n                  <Button\n                    size=\"small\"\n                    icon={<IconZoomOut />}\n                    onClick={changeZoom(\"out\")}\n                  />\n                </Tooltip>\n              </Space>\n            </StyledToolbarContainer>\n          </StyledContainer>\n        </Resizable>\n      </VisibilitySensor>\n    </NodeViewWrapper>\n  );\n};\n\nexport const MindView = React.memo(_MindView, (prevProps, nextProps) => {\n  if (deepEqual(prevProps.node.attrs, nextProps.node.attrs)) {\n    return true;\n  }\n  return false;\n});\n","import styled from \"styled-components\";\n\nexport const StyledMindEditorContainer = styled.div`\n  position: relative;\n  height: 100%;\n  margin: 0 -24px;\n  border-top: 1px solid ${props => props.theme.borderColor};\n\n  .km-view {\n    font-family: \"STHeitiSC-Light\", \"STHeiti\", \"Hei\", \"Heiti SC\",\n      \"Microsoft Yahei\", Arial, sans-serif;\n    -webkit-user-select: none;\n    user-select: none;\n    position: relative;\n  }\n\n  .km-view .km-receiver {\n    position: absolute;\n    left: -99999px;\n    top: -99999px;\n    width: 20px;\n    height: 20px;\n    outline: none;\n    margin: 0;\n  }\n\n  .km-view image {\n    cursor: zoom-in;\n  }\n\n  .km-image-viewer {\n    position: fixed;\n    z-index: 99999;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, 0.75);\n  }\n\n  .km-image-viewer .km-image-viewer-container {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    text-align: center;\n    white-space: nowrap;\n    overflow: auto;\n  }\n\n  .km-image-viewer .km-image-viewer-container::before {\n    content: \"\";\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    font-size: 0;\n    vertical-align: middle;\n  }\n\n  .km-image-viewer .km-image-viewer-container img {\n    cursor: zoom-out;\n    vertical-align: middle;\n  }\n\n  .km-image-viewer .km-image-viewer-container img.limited {\n    cursor: zoom-in;\n    max-width: 100%;\n    max-height: 100%;\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar {\n    z-index: 1;\n    background: rgba(0, 0, 0, 0.75);\n    text-align: right;\n    transition: all 0.25s;\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar.hidden {\n    transform: translate(0, -100%);\n    opacity: 0;\n  }\n\n  .km-image-viewer .km-image-viewer-btn {\n    cursor: pointer;\n    outline: 0;\n    border: 0;\n    width: 44px;\n    height: 44px;\n    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9Ijg4IiB2aWV3Qm94PSIwIDAgMjY0IDg4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZT5kZWZhdWx0LXNraW4gMjwvdGl0bGU+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Zz48cGF0aCBkPSJNNjcuMDAyIDU5LjV2My43NjhjLTYuMzA3Ljg0LTkuMTg0IDUuNzUtMTAuMDAyIDkuNzMyIDIuMjItMi44MyA1LjU2NC01LjA5OCAxMC4wMDItNS4wOThWNzEuNUw3MyA2NS41ODUgNjcuMDAyIDU5LjV6IiBpZD0iU2hhcGUiIGZpbGw9IiNmZmYiLz48ZyBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMTMgMjl2LTVoMnYzaDN2MmgtNXpNMTMgMTVoNXYyaC0zdjNoLTJ2LTV6TTMxIDE1djVoLTJ2LTNoLTN2LTJoNXpNMzEgMjloLTV2LTJoM3YtM2gydjV6IiBpZD0iU2hhcGUiLz48L2c+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTYyIDI0djVoLTJ2LTNoLTN2LTJoNXpNNjIgMjBoLTV2LTJoM3YtM2gydjV6TTcwIDIwdi01aDJ2M2gzdjJoLTV6TTcwIDI0aDV2MmgtM3YzaC0ydi01eiIvPjwvZz48cGF0aCBkPSJNMjAuNTg2IDY2bC01LjY1Ni01LjY1NiAxLjQxNC0xLjQxNEwyMiA2NC41ODZsNS42NTYtNS42NTYgMS40MTQgMS40MTRMMjMuNDE0IDY2bDUuNjU2IDUuNjU2LTEuNDE0IDEuNDE0TDIyIDY3LjQxNGwtNS42NTYgNS42NTYtMS40MTQtMS40MTRMMjAuNTg2IDY2eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMTEuNzg1IDY1LjAzTDExMCA2My41bDMtMy41aC0xMHYtMmgxMGwtMy0zLjUgMS43ODUtMS40NjhMMTE3IDU5bC01LjIxNSA2LjAzeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xNTIuMjE1IDY1LjAzTDE1NCA2My41bC0zLTMuNWgxMHYtMmgtMTBsMy0zLjUtMS43ODUtMS40NjhMMTQ3IDU5bDUuMjE1IDYuMDN6IiBmaWxsPSIjZmZmIi8+PGc+PHBhdGggaWQ9IlJlY3RhbmdsZS0xMSIgZmlsbD0iI2ZmZiIgZD0iTTE2MC45NTcgMjguNTQzbC0zLjI1LTMuMjUtMS40MTMgMS40MTQgMy4yNSAzLjI1eiIvPjxwYXRoIGQ9Ik0xNTIuNSAyN2MzLjAzOCAwIDUuNS0yLjQ2MiA1LjUtNS41cy0yLjQ2Mi01LjUtNS41LTUuNS01LjUgMi40NjItNS41IDUuNSAyLjQ2MiA1LjUgNS41IDUuNXoiIGlkPSJPdmFsLTEiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTUwIDIxaDV2MWgtNXoiLz48L2c+PGc+PHBhdGggZD0iTTExNi45NTcgMjguNTQzbC0xLjQxNCAxLjQxNC0zLjI1LTMuMjUgMS40MTQtMS40MTQgMy4yNSAzLjI1eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMDguNSAyN2MzLjAzOCAwIDUuNS0yLjQ2MiA1LjUtNS41cy0yLjQ2Mi01LjUtNS41LTUuNS01LjUgMi40NjItNS41IDUuNSAyLjQ2MiA1LjUgNS41IDUuNXoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA2IDIxaDV2MWgtNXoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA5LjA0MyAxOS4wMDhsLS4wODUgNS0xLS4wMTcuMDg1LTV6Ii8+PC9nPjwvZz48L2c+PC9zdmc+);\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n  }\n\n  .km-image-viewer .km-image-viewer-close {\n    background-position: 0 -44px;\n  }\n\n  .km-editor {\n    overflow: hidden;\n    z-index: 2;\n  }\n  .km-editor > .mask {\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: transparent;\n  }\n  .km-editor > .receiver {\n    position: absolute;\n    background: white;\n    outline: none;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);\n    left: 0;\n    top: 0;\n    padding: 3px 5px;\n    margin-left: -3px;\n    margin-top: -5px;\n    max-width: 300px;\n    width: auto;\n    font-size: 14px;\n    line-height: 1.4em;\n    min-height: 1.4em;\n    box-sizing: border-box;\n    overflow: hidden;\n    word-break: break-all;\n    word-wrap: break-word;\n    border: none;\n    pointer-events: none;\n    opacity: 0;\n    z-index: -1000;\n  }\n  .km-editor > .receiver.debug {\n    opacity: 1;\n    outline: 1px solid green;\n    background: none;\n    z-index: 0;\n  }\n  .km-editor > .receiver.input {\n    pointer-events: all;\n    opacity: 1;\n    z-index: 999;\n    background: white;\n    outline: none;\n  }\n  div.minder-editor-container {\n    position: absolute;\n    top: 40px;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    font-family: Arial, \"Hiragino Sans GB\", \"Microsoft YaHei\",\n      \"WenQuanYi Micro Hei\", sans-serif;\n  }\n  .minder-editor {\n    position: absolute;\n    top: 92px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n  .minder-viewer {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n  .control-panel {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 250px;\n    bottom: 0;\n    border-left: 1px solid #ccc;\n  }\n  .minder-divider {\n    position: absolute;\n    top: 0;\n    right: 250px;\n    bottom: 0;\n    width: 2px;\n    background-color: #fbfbfb;\n    cursor: ew-resize;\n  }\n  .panel-body {\n    padding: 10px;\n  }\n  .upload-image {\n    width: 0.1px;\n    height: 0.1px;\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    z-index: -1;\n  }\n  .top-tab .nav-tabs {\n    background-color: #e1e1e1;\n    border: 0;\n    height: 32px;\n  }\n  .top-tab .nav-tabs li {\n    margin: 0;\n  }\n  .top-tab .nav-tabs li a {\n    margin: 0;\n    border: 0;\n    padding: 6px 15px;\n    border-radius: 0;\n    vertical-align: middle;\n  }\n  .top-tab .nav-tabs li a:hover,\n  .top-tab .nav-tabs li a:focus {\n    background: inherit;\n    border: 0;\n  }\n  .top-tab .nav-tabs li.active a {\n    border: 0;\n    background-color: #fff;\n  }\n  .top-tab .nav-tabs li.active a:hover,\n  .top-tab .nav-tabs li.active a:focus {\n    border: 0;\n  }\n  .top-tab .tab-content {\n    height: 60px;\n    background-color: #fff;\n    border-bottom: 1px solid #dbdbdb;\n  }\n  .top-tab .tab-pane {\n    font-size: 0;\n  }\n  .km-btn-group {\n    display: inline-block;\n    margin: 5px 0;\n    padding: 0 5px;\n    vertical-align: middle;\n    border-right: 1px dashed #eee;\n  }\n  .km-btn-item {\n    display: inline-block;\n    margin: 0 3px;\n    font-size: 0;\n    cursor: default;\n  }\n  .km-btn-item[disabled] {\n    opacity: 0.5;\n  }\n  .km-btn-item[disabled]:hover,\n  .km-btn-item[disabled]:active {\n    background-color: #fff;\n  }\n  .km-btn-item .km-btn-icon {\n    display: inline-block;\n    background: url(images/icons.png) no-repeat;\n    background-position: 0 20px;\n    width: 20px;\n    height: 20px;\n    padding: 2px;\n    margin: 1px;\n    vertical-align: middle;\n  }\n  .km-btn-item .km-btn-caption {\n    display: inline-block;\n    font-size: 12px;\n    vertical-align: middle;\n  }\n  .km-btn-item:hover {\n    background-color: #eff3fa;\n  }\n  .km-btn-item:active {\n    background-color: #c4d0ee;\n  }\n  .do-group {\n    width: 38px;\n  }\n  .undo .km-btn-icon {\n    background-position: 0 -1240px;\n  }\n  .redo .km-btn-icon {\n    background-position: 0 -1220px;\n  }\n  .append-group {\n    width: 212px;\n  }\n  .append-child-node .km-btn-icon {\n    background-position: 0 0;\n  }\n  .append-sibling-node .km-btn-icon {\n    background-position: 0 -20px;\n  }\n  .append-parent-node .km-btn-icon {\n    background-position: 0 -40px;\n  }\n  .arrange-group {\n    width: 64px;\n  }\n  .arrange-up .km-btn-icon {\n    background-position: 0 -280px;\n  }\n  .arrange-down .km-btn-icon {\n    background-position: 0 -300px;\n  }\n  .operation-group {\n    width: 64px;\n  }\n  .edit-node .km-btn-icon {\n    background-position: 0 -60px;\n  }\n  .remove-node .km-btn-icon {\n    background-position: 0 -80px;\n  }\n  .btn-group-vertical {\n    vertical-align: middle;\n    margin: 5px;\n  }\n  .btn-group-vertical .hyperlink,\n  .btn-group-vertical .hyperlink-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .hyperlink:hover,\n  .btn-group-vertical .hyperlink-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .hyperlink:active,\n  .btn-group-vertical .hyperlink-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .hyperlink.active,\n  .btn-group-vertical .hyperlink-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .hyperlink {\n    height: 25px;\n    background: url(images/icons.png) no-repeat center -100px;\n  }\n  .btn-group-vertical .hyperlink-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .hyperlink-caption .caption {\n    font-size: 12px;\n  }\n  .open > .dropdown-toggle.btn-default {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .image-btn,\n  .btn-group-vertical .image-btn-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .image-btn:hover,\n  .btn-group-vertical .image-btn-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .image-btn:active,\n  .btn-group-vertical .image-btn-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .image-btn.active,\n  .btn-group-vertical .image-btn-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .image-btn {\n    height: 25px;\n    background: url(images/icons.png) no-repeat center -125px;\n  }\n  .btn-group-vertical .image-btn-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .image-btn-caption .caption {\n    font-size: 12px;\n  }\n  .image-preview {\n    display: block;\n    max-width: 50%;\n  }\n  .modal-body .tab-pane {\n    font-size: inherit;\n    padding-top: 15px;\n  }\n  .search-result {\n    margin-top: 15px;\n    height: 370px;\n    overflow: hidden;\n  }\n  .search-result ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    clear: both;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n  .search-result ul li {\n    list-style: none;\n    float: left;\n    display: block;\n    width: 130px;\n    height: 130px;\n    line-height: 130px;\n    margin: 6px;\n    padding: 0;\n    font-size: 12px;\n    position: relative;\n    text-align: center;\n    overflow: hidden;\n    cursor: pointer;\n    border: 2px solid #fcfcfc;\n  }\n  .search-result ul li.selected {\n    border: 2px solid #fc8383;\n  }\n  .search-result ul li img {\n    max-width: 126px;\n    max-height: 130px;\n    vertical-align: middle;\n  }\n  .search-result ul li span {\n    display: block;\n    position: absolute;\n    bottom: 0;\n    height: 20px;\n    background: rgba(0, 0, 0, 0.5);\n    left: 0;\n    right: 0;\n    color: white;\n    line-height: 20px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    word-break: break-all;\n    white-space: nowrap;\n    opacity: 0;\n    -webkit-transform: translate(0, 20px);\n    -ms-transform: translate(0, 20px);\n    transform: translate(0, 20px);\n    -webkit-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n  }\n  .search-result ul li:hover span {\n    opacity: 1;\n    -webkit-transform: translate(0, 0);\n    -ms-transform: translate(0, 0);\n    transform: translate(0, 0);\n  }\n  @media (min-width: 768px) {\n    .form-inline .form-control {\n      width: 422px;\n    }\n  }\n  .btn-group-vertical {\n    vertical-align: top;\n    margin: 5px;\n  }\n  .btn-group-vertical.note-btn-group {\n    border-right: 1px dashed #eee;\n    padding-right: 5px;\n  }\n  .btn-group-vertical .note-btn,\n  .btn-group-vertical .note-btn-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .note-btn:hover,\n  .btn-group-vertical .note-btn-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .note-btn:active,\n  .btn-group-vertical .note-btn-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .note-btn.active,\n  .btn-group-vertical .note-btn-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .note-btn {\n    height: 25px;\n    background: url(images/icons.png) no-repeat center -1150px;\n  }\n  .btn-group-vertical .note-btn-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .note-btn-caption .caption {\n    font-size: 12px;\n  }\n  .open > .dropdown-toggle.btn-default {\n    background-color: #eff3fa;\n  }\n  .gfm-render {\n    font-size: 12px;\n    color: #333;\n    line-height: 1.8em;\n  }\n  .gfm-render blockquote,\n  .gfm-render ul,\n  .gfm-render table,\n  .gfm-render p,\n  .gfm-render pre,\n  .gfm-render hr {\n    margin: 1em 0;\n    cursor: text;\n  }\n  .gfm-render blockquote:first-child:last-child,\n  .gfm-render ul:first-child:last-child,\n  .gfm-render table:first-child:last-child,\n  .gfm-render p:first-child:last-child,\n  .gfm-render pre:first-child:last-child,\n  .gfm-render hr:first-child:last-child {\n    margin: 0;\n  }\n  .gfm-render img {\n    max-width: 100%;\n  }\n  .gfm-render a {\n    color: blue;\n  }\n  .gfm-render a:hover {\n    color: red;\n  }\n  .gfm-render blockquote {\n    display: block;\n    border-left: 4px solid #e4ad91;\n    color: #da8e68;\n    padding-left: 10px;\n    font-style: italic;\n    margin-left: 2em;\n  }\n  .gfm-render ul,\n  .gfm-render ol {\n    padding-left: 3em;\n  }\n  .gfm-render table {\n    width: 100%;\n    border-collapse: collapse;\n    margin: 1em 0;\n  }\n  .gfm-render table th,\n  .gfm-render table td {\n    border: 1px solid #666;\n    padding: 2px 4px;\n  }\n  .gfm-render table th {\n    background: rgba(45, 141, 234, 0.2);\n  }\n  .gfm-render table tr:nth-child(even) td {\n    background: rgba(45, 141, 234, 0.03);\n  }\n  .gfm-render em {\n    color: red;\n  }\n  .gfm-render del {\n    color: #999;\n  }\n  .gfm-render pre {\n    background: rgba(45, 141, 234, 0.1);\n    padding: 5px;\n    border-radius: 5px;\n    word-break: break-all;\n    word-wrap: break-word;\n  }\n  .gfm-render code {\n    background: rgba(45, 141, 234, 0.1);\n    /*         display: inline-block; */\n    padding: 0 5px;\n    border-radius: 3px;\n  }\n  .gfm-render pre code {\n    background: none;\n  }\n  .gfm-render hr {\n    border: none;\n    border-top: 1px solid #ccc;\n  }\n  .gfm-render .highlight {\n    background: yellow;\n    color: red;\n  }\n  .km-note {\n    width: 300px;\n    border-left: 1px solid #babfcd;\n    padding: 5px 10px;\n    background: white;\n    position: absolute;\n    top: 92px;\n    right: 0;\n    bottom: 0;\n    left: auto;\n    z-index: 3;\n  }\n  .km-note.panel {\n    margin: 0;\n    padding: 0;\n  }\n  .km-note.panel .panel-heading h3 {\n    display: inline-block;\n  }\n  .km-note.panel .panel-heading .close-note-editor {\n    width: 15px;\n    height: 15px;\n    display: inline-block;\n  }\n  .km-note.panel .panel-heading .close-note-editor:hover {\n    cursor: pointer;\n  }\n  .km-note.panel .panel-body {\n    padding: 0;\n  }\n  .km-note .CodeMirror {\n    position: absolute;\n    top: 41px;\n    bottom: 0;\n    height: auto;\n    cursor: text;\n    font-size: 14px;\n    line-height: 1.3em;\n    font-family: consolas;\n  }\n  .km-note-tips {\n    color: #ccc;\n    padding: 3px 8px;\n  }\n  #previewer-content {\n    position: absolute;\n    background: #ffd;\n    padding: 5px 15px;\n    border-radius: 5px;\n    max-width: 400px;\n    max-height: 200px;\n    overflow: auto;\n    z-index: 10;\n    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n    word-break: break-all;\n    font-size: 12px;\n    color: #333;\n    line-height: 1.8em;\n  }\n  #previewer-content blockquote,\n  #previewer-content ul,\n  #previewer-content table,\n  #previewer-content p,\n  #previewer-content pre,\n  #previewer-content hr {\n    margin: 1em 0;\n    cursor: text;\n  }\n  #previewer-content blockquote:first-child:last-child,\n  #previewer-content ul:first-child:last-child,\n  #previewer-content table:first-child:last-child,\n  #previewer-content p:first-child:last-child,\n  #previewer-content pre:first-child:last-child,\n  #previewer-content hr:first-child:last-child {\n    margin: 0;\n  }\n  #previewer-content img {\n    max-width: 100%;\n  }\n  #previewer-content a {\n    color: blue;\n  }\n  #previewer-content a:hover {\n    color: red;\n  }\n  #previewer-content blockquote {\n    display: block;\n    border-left: 4px solid #e4ad91;\n    color: #da8e68;\n    padding-left: 10px;\n    font-style: italic;\n    margin-left: 2em;\n  }\n  #previewer-content ul,\n  #previewer-content ol {\n    padding-left: 3em;\n  }\n  #previewer-content table {\n    width: 100%;\n    border-collapse: collapse;\n    margin: 1em 0;\n  }\n  #previewer-content table th,\n  #previewer-content table td {\n    border: 1px solid #666;\n    padding: 2px 4px;\n  }\n  #previewer-content table th {\n    background: rgba(45, 141, 234, 0.2);\n  }\n  #previewer-content table tr:nth-child(even) td {\n    background: rgba(45, 141, 234, 0.03);\n  }\n  #previewer-content em {\n    color: red;\n  }\n  #previewer-content del {\n    color: #999;\n  }\n  #previewer-content pre {\n    background: rgba(45, 141, 234, 0.1);\n    padding: 5px;\n    border-radius: 5px;\n    word-break: break-all;\n    word-wrap: break-word;\n  }\n  #previewer-content code {\n    background: rgba(45, 141, 234, 0.1);\n    /*         display: inline-block; */\n    padding: 0 5px;\n    border-radius: 3px;\n  }\n  #previewer-content pre code {\n    background: none;\n  }\n  #previewer-content hr {\n    border: none;\n    border-top: 1px solid #ccc;\n  }\n  #previewer-content .highlight {\n    background: yellow;\n    color: red;\n  }\n  #previewer-content.ng-hide {\n    display: block !important;\n    left: -99999px !important;\n    top: -99999px !important;\n  }\n  .panel-body {\n    padding: 10px;\n  }\n  .tab-content .km-priority {\n    vertical-align: middle;\n    font-size: inherit;\n    display: inline-block;\n    width: 140px;\n    margin: 5px;\n    border-right: 1px dashed #eee;\n  }\n  .tab-content .km-priority .km-priority-item {\n    margin: 0 1px;\n    padding: 1px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon {\n    background: url(images/iconpriority.png) repeat-y;\n    background-color: transparent;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-0 {\n    background-position: 0 20px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-1 {\n    background-position: 0 0px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-2 {\n    background-position: 0 -20px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-3 {\n    background-position: 0 -40px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-4 {\n    background-position: 0 -60px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-5 {\n    background-position: 0 -80px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-6 {\n    background-position: 0 -100px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-7 {\n    background-position: 0 -120px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-8 {\n    background-position: 0 -140px;\n  }\n  .tab-content .km-priority .km-priority-item .km-priority-icon.priority-9 {\n    background-position: 0 -160px;\n  }\n  .tab-content .km-progress {\n    vertical-align: middle;\n    font-size: inherit;\n    display: inline-block;\n    width: 140px;\n    margin: 5px;\n    border-right: 1px dashed #eee;\n  }\n  .tab-content .km-progress .km-progress-item {\n    margin: 0 1px;\n    padding: 1px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon {\n    background: url(images/iconprogress.png) repeat-y;\n    background-color: transparent;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-0 {\n    background-position: 0 20px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-1 {\n    background-position: 0 0px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-2 {\n    background-position: 0 -20px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-3 {\n    background-position: 0 -40px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-4 {\n    background-position: 0 -60px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-5 {\n    background-position: 0 -80px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-6 {\n    background-position: 0 -100px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-7 {\n    background-position: 0 -120px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-8 {\n    background-position: 0 -140px;\n  }\n  .tab-content .km-progress .km-progress-item .km-progress-icon.progress-9 {\n    background-position: 0 -160px;\n  }\n  .resource-editor {\n    vertical-align: middle;\n    display: inline-block;\n    margin: 5px;\n  }\n  .resource-editor .input-group,\n  .resource-editor .km-resource {\n    font-size: 12px;\n  }\n  .resource-editor .input-group {\n    height: 20px;\n    width: 168px;\n  }\n  .resource-editor .resource-dropdown {\n    position: relative;\n    width: 168px;\n    border: 1px solid #ccc;\n    margin-top: -1px;\n    border-bottom-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n  .resource-editor .resource-dropdown .km-resource {\n    position: absolute;\n    width: 154px;\n    margin-bottom: 3px;\n    padding: 0;\n    list-style-type: none;\n    overflow: scroll;\n    max-height: 500px;\n  }\n  .resource-editor .resource-dropdown .km-resource.open {\n    z-index: 3;\n    background-color: #fff;\n  }\n  .resource-editor .resource-dropdown .km-resource li {\n    display: inline-block;\n    padding: 1px 2px;\n    border-radius: 4px;\n    margin: 2px 3px;\n  }\n  .resource-editor .resource-dropdown .km-resource li[disabled] {\n    opacity: 0.5;\n  }\n  .resource-editor .resource-dropdown .resource-caret {\n    display: block;\n    float: right;\n    width: 12px;\n    height: 24px;\n    padding: 8px 1px;\n  }\n  .resource-editor .resource-dropdown .resource-caret:hover {\n    background-color: #eff3fa;\n  }\n  .resource-editor .resource-dropdown .resource-caret:active {\n    background-color: #c4d0ee;\n  }\n  .resource-editor input.form-control,\n  .resource-editor .btn {\n    font-size: 12px;\n  }\n  .resource-editor input.form-control {\n    padding: 2px 4px;\n    height: 24px;\n    border-bottom-left-radius: 0;\n  }\n  .resource-editor .input-group-btn {\n    line-height: 24px;\n  }\n  .resource-editor .input-group-btn .btn {\n    padding: 2px 4px;\n    height: 24px;\n    border-bottom-right-radius: 0;\n  }\n  .temp-panel {\n    margin: 5px 5px 5px 10px;\n    border-right: 1px dashed #eee;\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .temp-list {\n    min-width: 124px;\n  }\n  .temp-item-wrap {\n    width: 50px;\n    height: 40px;\n    padding: 0 2px;\n    margin: 5px;\n    display: inline-block;\n  }\n  .temp-item {\n    display: inline-block;\n    width: 50px;\n    height: 40px;\n    background-image: url(images/template.png);\n    background-repeat: no-repeat;\n  }\n  .temp-item.default {\n    background-position: 0 0;\n  }\n  .temp-item.structure {\n    background-position: -50px 0;\n  }\n  .temp-item.filetree {\n    background-position: -100px 0;\n  }\n  .temp-item.right {\n    background-position: -150px 0;\n  }\n  .temp-item.fish-bone {\n    background-position: -200px 0;\n  }\n  .temp-item.tianpan {\n    background-position: -250px 0;\n  }\n  .current-temp-item {\n    width: 74px;\n    padding: 0 0 0 5px;\n    border: 1px solid #fff;\n  }\n  .current-temp-item:hover {\n    background-color: #eff3fa;\n  }\n  .current-temp-item[disabled] {\n    opacity: 0.5;\n  }\n  .current-temp-item .caret {\n    margin-left: 5px;\n  }\n  .temp-item-selected {\n    background-color: #87a9da;\n  }\n  .theme-panel {\n    height: 42px;\n    margin: 5px;\n    padding: 0 5px 0 0;\n    border-right: 1px dashed #eee;\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .theme-list {\n    min-width: 162px;\n  }\n  div a.theme-item {\n    display: inline-block;\n    width: 70px;\n    height: 30px;\n    text-align: center;\n    line-height: 30px;\n    padding: 0 5px;\n    font-size: 12px;\n    cursor: pointer;\n    text-decoration: none;\n    color: #000;\n  }\n  .theme-item-selected {\n    width: 100px;\n    padding: 6px 7px;\n    border: 1px solid #fff;\n  }\n  .theme-item-selected:hover {\n    background-color: #eff3fa;\n  }\n  .theme-item-selected .caret {\n    margin-left: 5px;\n  }\n  .theme-item-selected[disabled] {\n    opacity: 0.5;\n  }\n  .theme-item-wrap {\n    display: inline-block;\n    width: 80px;\n    height: 40px;\n    padding: 5px;\n  }\n  .theme-item-wrap:hover {\n    background-color: #eff3fa;\n  }\n  .readjust-layout {\n    display: inline-block;\n    vertical-align: middle;\n    padding: 0 10px 0 5px;\n    border-right: 1px dashed #eee;\n  }\n  .btn-icon {\n    width: 25px;\n    height: 25px;\n    margin-left: 12px;\n    display: block;\n  }\n  .btn-label {\n    font-size: 12px;\n  }\n  .btn-wrap {\n    width: 50px;\n    height: 42px;\n    cursor: pointer;\n    display: inline-block;\n    text-decoration: none;\n  }\n  .btn-wrap[disabled] span {\n    opacity: 0.5;\n  }\n  .btn-wrap[disabled] {\n    cursor: default;\n  }\n  .btn-wrap[disabled]:hover {\n    background-color: transparent;\n  }\n  .btn-wrap[disabled]:active {\n    background-color: transparent;\n  }\n  .btn-wrap:link {\n    text-decoration: none;\n  }\n  .btn-wrap:visited {\n    text-decoration: none;\n  }\n  .btn-wrap:hover {\n    background-color: #eff3fa;\n    text-decoration: none;\n  }\n  .btn-wrap:active {\n    background-color: #c4d0ee;\n  }\n  .reset-layout-icon {\n    background: url(images/icons.png) no-repeat;\n    background-position: 0 -150px;\n  }\n  .style-operator {\n    display: inline-block;\n    vertical-align: middle;\n    padding: 0 5px;\n    border-right: 1px dashed #eee;\n  }\n  .style-operator .clear-style {\n    vertical-align: middle;\n  }\n  .clear-style-icon {\n    background: url(images/icons.png) no-repeat;\n    background-position: 0 -175px;\n  }\n  .s-btn-group-vertical {\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .s-btn-icon {\n    width: 20px;\n    height: 20px;\n    margin-right: 3px;\n    display: inline-block;\n    vertical-align: middle;\n  }\n  .s-btn-label {\n    font-size: 12px;\n    vertical-align: middle;\n    display: inline-block;\n  }\n  .s-btn-wrap {\n    padding: 0 5px 0 3px;\n    display: inline-block;\n    text-decoration: none;\n    font-size: 0;\n  }\n  .s-btn-wrap[disabled] span {\n    opacity: 0.5;\n  }\n  .s-btn-wrap[disabled] {\n    cursor: default;\n  }\n  .s-btn-wrap[disabled]:hover {\n    background-color: transparent;\n  }\n  .s-btn-wrap[disabled]:active {\n    background-color: transparent;\n  }\n  .s-btn-wrap:hover {\n    background-color: #eff3fa;\n    text-decoration: none;\n  }\n  .s-btn-wrap:active {\n    background-color: #c4d0ee;\n  }\n  .copy-style-icon {\n    background: url(images/icons.png) no-repeat;\n    background-position: 0 -200px;\n  }\n  .paste-style-wrap {\n    display: block;\n  }\n  .paste-style-icon {\n    background: url(images/icons.png) no-repeat;\n    background-position: 0 -220px;\n  }\n  .font-operator {\n    width: 170px;\n    display: inline-block;\n    vertical-align: middle;\n    font-size: 12px;\n    padding: 0 5px;\n  }\n  .font-operator .font-size-list {\n    display: inline-block;\n    border: 1px solid #eee;\n    padding: 2px 4px;\n  }\n  .font-operator .font-family-list {\n    display: inline-block;\n    border: 1px solid #eee;\n    padding: 2px 4px;\n  }\n  .current-font-item a {\n    text-decoration: none;\n    display: inline-block;\n  }\n  .current-font-family {\n    width: 75px;\n    height: 18px;\n    overflow: hidden;\n    vertical-align: bottom;\n  }\n  .current-font-size {\n    width: 32px;\n    height: 18px;\n    overflow: hidden;\n    vertical-align: bottom;\n  }\n  .current-font-item[disabled] {\n    opacity: 0.5;\n  }\n  .font-item {\n    line-height: 1em;\n    text-align: left;\n  }\n  .font-item-selected {\n    background-color: #87a9da;\n  }\n  .font-bold,\n  .font-italics {\n    display: inline-block;\n    background: url(images/icons.png) no-repeat;\n    cursor: pointer;\n    margin: 0 3px;\n  }\n  .font-bold:hover,\n  .font-italics:hover {\n    background-color: #eff3fa;\n  }\n  .font-bold:active,\n  .font-italics:active {\n    background-color: #c4d0ee;\n  }\n  .font-bold[disabled],\n  .font-italics[disabled] {\n    opacity: 0.5;\n  }\n  .font-bold {\n    background-position: 0 -240px;\n  }\n  .font-italics {\n    background-position: 0 -260px;\n  }\n  .font-bold-selected,\n  .font-italics-selected {\n    background-color: #87a9da;\n  }\n  .font-color-wrap {\n    display: inline-block;\n    width: 30px;\n    height: 22px;\n    margin: 3px 3px 0 0;\n    border: 1px #efefef solid;\n    vertical-align: middle;\n    font-size: 0;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .font-color-wrap[disabled] {\n    opacity: 0.5;\n  }\n  .font-color-wrap .quick-font-color {\n    display: inline-block;\n    width: 20px;\n    height: 16px;\n    font-size: 14px;\n    line-height: 16px;\n    vertical-align: top;\n    text-align: center;\n    cursor: default;\n    color: #000;\n  }\n  .font-color-wrap .quick-font-color:hover {\n    background-color: #eff3fa;\n  }\n  .font-color-wrap .quick-font-color:active {\n    background-color: #c4d0ee;\n  }\n  .font-color-wrap .quick-font-color[disabled] {\n    opacity: 0.5;\n  }\n  .font-color-wrap .font-color-preview {\n    display: inline-block;\n    width: 12px;\n    height: 2px;\n    margin: 0 4px 0;\n    background-color: #000;\n  }\n  .font-color-wrap .font-color-preview[disabled] {\n    opacity: 0.5;\n  }\n  .font-color {\n    display: inline-block;\n    width: 8px;\n    height: 16px;\n  }\n  .font-color:hover {\n    background-color: #eff3fa;\n  }\n  .font-color:active {\n    background-color: #c4d0ee;\n  }\n  .font-color[disabled] {\n    opacity: 0.5;\n  }\n  .font-color .caret {\n    margin-left: -2px;\n    margin-top: 7px;\n  }\n  .bg-color-wrap {\n    display: inline-block;\n    width: 30px;\n    height: 22px;\n    margin: 3px 3px 0 0;\n    border: 1px #efefef solid;\n    vertical-align: middle;\n    font-size: 0;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .bg-color-wrap[disabled] {\n    opacity: 0.5;\n  }\n  .bg-color-wrap .quick-bg-color {\n    display: inline-block;\n    width: 20px;\n    height: 16px;\n    font-size: 14px;\n    line-height: 16px;\n    vertical-align: top;\n    text-align: center;\n    cursor: default;\n    color: #000;\n    background: url(images/icons.png) no-repeat center -1260px;\n  }\n  .bg-color-wrap .quick-bg-color:hover {\n    background-color: #eff3fa;\n  }\n  .bg-color-wrap .quick-bg-color:active {\n    background-color: #c4d0ee;\n  }\n  .bg-color-wrap .quick-bg-color[disabled] {\n    opacity: 0.5;\n  }\n  .bg-color-wrap .bg-color-preview {\n    display: inline-block;\n    width: 12px;\n    height: 2px;\n    margin: 0 4px 0;\n    background-color: #fff;\n  }\n  .bg-color-wrap .bg-color-preview[disabled] {\n    opacity: 0.5;\n  }\n  .bg-color {\n    display: inline-block;\n    width: 8px;\n    height: 16px;\n  }\n  .bg-color:hover {\n    background-color: #eff3fa;\n  }\n  .bg-color:active {\n    background-color: #c4d0ee;\n  }\n  .bg-color[disabled] {\n    opacity: 0.5;\n  }\n  .bg-color .caret {\n    margin-left: -2px;\n    margin-top: 7px;\n  }\n  .btn-group-vertical {\n    vertical-align: middle;\n    margin: 5px;\n  }\n  .btn-group-vertical .expand,\n  .btn-group-vertical .expand-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .expand:hover,\n  .btn-group-vertical .expand-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .expand:active,\n  .btn-group-vertical .expand-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .expand.active,\n  .btn-group-vertical .expand-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .expand {\n    height: 25px;\n    background: url(images/icons.png) no-repeat 0 -995px;\n    background-position-x: 50%;\n  }\n  .btn-group-vertical .expand-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .expand-caption .caption {\n    font-size: 12px;\n  }\n  .btn-group-vertical {\n    vertical-align: middle;\n    margin: 5px;\n  }\n  .btn-group-vertical .select,\n  .btn-group-vertical .select-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .select:hover,\n  .btn-group-vertical .select-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .select:active,\n  .btn-group-vertical .select-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .select.active,\n  .btn-group-vertical .select-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .select {\n    height: 25px;\n    background: url(images/icons.png) no-repeat 7px -1175px;\n  }\n  .btn-group-vertical .select-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .select-caption .caption {\n    font-size: 12px;\n  }\n  .btn-group-vertical {\n    vertical-align: middle;\n    margin: 5px;\n  }\n  .btn-group-vertical .search,\n  .btn-group-vertical .search-caption {\n    width: 40px;\n    margin: 0;\n    padding: 0;\n    border: none !important;\n    border-radius: 0 !important;\n  }\n  .btn-group-vertical .search:hover,\n  .btn-group-vertical .search-caption:hover {\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .search:active,\n  .btn-group-vertical .search-caption:active {\n    background-color: #c4d0ee;\n  }\n  .btn-group-vertical .search.active,\n  .btn-group-vertical .search-caption.active {\n    box-shadow: none;\n    background-color: #eff3fa;\n  }\n  .btn-group-vertical .search {\n    height: 25px;\n    background: url(images/icons.png) no-repeat 0 -345px;\n    background-position-x: 50%;\n  }\n  .btn-group-vertical .search-caption {\n    height: 20px;\n  }\n  .btn-group-vertical .search-caption .caption {\n    font-size: 12px;\n  }\n  .search-box {\n    float: right;\n    background-color: #fff;\n    border: 1px solid #dbdbdb;\n    position: relative;\n    top: 0;\n    z-index: 3;\n    width: 360px;\n    height: 40px;\n    padding: 3px 6px;\n    opacity: 1;\n  }\n  .search-box .search-input-wrap,\n  .search-box .prev-and-next-btn {\n    float: left;\n  }\n  .search-box .close-search {\n    float: right;\n    height: 16px;\n    width: 16px;\n    padding: 1px;\n    border-radius: 100%;\n    margin-top: 6px;\n    margin-right: 10px;\n  }\n  .search-box .close-search .glyphicon {\n    top: -1px;\n  }\n  .search-box .close-search:hover {\n    background-color: #efefef;\n  }\n  .search-box .close-search:active {\n    background-color: #999;\n  }\n  .search-box .search-input-wrap {\n    width: 240px;\n  }\n  .search-box .prev-and-next-btn {\n    margin-left: 5px;\n  }\n  .search-box .prev-and-next-btn .btn:focus {\n    outline: none;\n  }\n  .search-box .search-addon {\n    background-color: #fff;\n  }\n  .tool-group {\n    padding: 0;\n  }\n  .tool-group[disabled] {\n    opacity: 0.5;\n  }\n  .tool-group .tool-group-item {\n    display: inline-block;\n    border-radius: 4px;\n  }\n  .tool-group .tool-group-item .tool-group-icon {\n    width: 20px;\n    height: 20px;\n    padding: 2px;\n    margin: 1px;\n  }\n  .tool-group .tool-group-item:hover {\n    background-color: #eff3fa;\n  }\n  .tool-group .tool-group-item:active {\n    background-color: #c4d0ee;\n  }\n  .tool-group .tool-group-item.active {\n    background-color: #c4d0ee;\n  }\n  .nav-bar {\n    position: absolute;\n    width: 35px;\n    height: 240px;\n    padding: 5px 0;\n    left: 10px;\n    bottom: 10px;\n    background: #fc8383;\n    color: #fff;\n    border-radius: 4px;\n    z-index: 10;\n    box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\n    transition: -webkit-transform 0.7s 0.1s ease;\n    transition: transform 0.7s 0.1s ease;\n  }\n  .nav-bar .nav-btn {\n    width: 35px;\n    height: 24px;\n    line-height: 24px;\n    text-align: center;\n  }\n  .nav-bar .nav-btn .icon {\n    background: url(images/icons.png);\n    width: 20px;\n    height: 20px;\n    margin: 2px auto;\n    display: block;\n  }\n  .nav-bar .nav-btn.active {\n    background-color: #5a6378;\n  }\n  .nav-bar .zoom-in .icon {\n    background-position: 0 -730px;\n  }\n  .nav-bar .zoom-out .icon {\n    background-position: 0 -750px;\n  }\n  .nav-bar .hand .icon {\n    background-position: 0 -770px;\n    width: 25px;\n    height: 25px;\n    margin: 0 auto;\n  }\n  .nav-bar .camera .icon {\n    background-position: 0 -870px;\n    width: 25px;\n    height: 25px;\n    margin: 0 auto;\n  }\n  .nav-bar .nav-trigger .icon {\n    background-position: 0 -845px;\n    width: 25px;\n    height: 25px;\n    margin: 0 auto;\n  }\n  .nav-bar .zoom-pan {\n    width: 2px;\n    height: 70px;\n    box-shadow: 0 1px #e50000;\n    position: relative;\n    background: white;\n    margin: 3px auto;\n    overflow: visible;\n  }\n  .nav-bar .zoom-pan .origin {\n    position: absolute;\n    width: 20px;\n    height: 8px;\n    left: -9px;\n    margin-top: -4px;\n    background: transparent;\n  }\n  .nav-bar .zoom-pan .origin:after {\n    content: \" \";\n    display: block;\n    width: 6px;\n    height: 2px;\n    background: white;\n    left: 7px;\n    top: 3px;\n    position: absolute;\n  }\n  .nav-bar .zoom-pan .indicator {\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    left: -3px;\n    background: white;\n    border-radius: 100%;\n    margin-top: -4px;\n  }\n  .nav-previewer {\n    background: #fff;\n    width: 140px;\n    height: 120px;\n    position: absolute;\n    left: 45px;\n    bottom: 30px;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\n    border-radius: 0 2px 2px 0;\n    padding: 1px;\n    z-index: 9;\n    cursor: crosshair;\n    transition: -webkit-transform 0.7s 0.1s ease;\n    transition: transform 0.7s 0.1s ease;\n  }\n  .nav-previewer.grab {\n    cursor: move;\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n    cursor: grabbing;\n  }\n`;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { Editor } from \"@tiptap/core\";\nimport styled from \"styled-components\";\n\nimport { Modal, Loading, Button, Space } from \"../../../components\";\nimport { IconMind } from \"../../../icons\";\n\nimport { StyledMindEditorContainer } from \"./style\";\nimport { load, renderMind } from \"./kityminder\";\nimport { Toolbar } from \"./toolbar\";\n\nconst StyledHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 0 -24px;\n  padding: 8px 12px;\n`;\n\nconst StyledIconContainer = styled.span`\n  display: flex;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background-color: #f80;\n  border-radius: 2px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst StyledToolbarContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  width: 100%;\n  padding: 6px 24px;\n  overflow-x: auto;\n  color: #fff;\n  background-color: var(--semi-color-nav-bg);\n  border-bottom: 1px solid var(--semi-color-border);\n  align-items: center;\n`;\n\ntype IProps = {\n  editor: Editor;\n  data: string;\n  onClose: () => void;\n};\n\nexport const MindSettingModal: React.FC<IProps> = ({\n  editor,\n  data: outInData,\n  onClose\n}) => {\n  const [mind, setMind] = useState(null);\n  const [initialData, setInitialData] = useState({});\n  const [visible, toggleVisible] = useState(true);\n  const [loading, toggleLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const renderMindEditor = useCallback(\n    div => {\n      if (!div) return;\n\n      const mindInstance = renderMind({\n        container: div,\n        data: initialData,\n        isEditable: true\n      });\n\n      setMind(mindInstance);\n    },\n    [initialData]\n  );\n\n  useEffect(() => {\n    load()\n      .catch(setError)\n      .finally(() => toggleLoading(false));\n  }, [toggleLoading]);\n\n  const save = useCallback(async () => {\n    if (!mind) {\n      toggleVisible(false);\n      onClose();\n      return;\n    }\n\n    // @ts-ignore\n    return mind.exportData(\"svg\").then(svg => {\n      // @ts-ignore\n      const data = mind.exportJson();\n      editor\n        .chain()\n        .focus()\n        .setMind({ data: JSON.stringify(data), svg })\n        .run();\n    });\n  }, [editor, toggleVisible, mind]);\n\n  const saveAndExit = useCallback(() => {\n    save().then(() => {\n      toggleVisible(false);\n      onClose();\n    });\n  }, [save]);\n\n  useEffect(() => {\n    // @ts-ignore\n    outInData && setInitialData(outInData);\n  }, [outInData]);\n\n  return (\n    <Modal\n      centered\n      title=\"思维导图\"\n      fullScreen\n      visible={visible}\n      okText=\"保存\"\n      cancelText=\"退出\"\n      motion={false}\n      header={\n        <StyledHeader>\n          <Space>\n            <StyledIconContainer>\n              <IconMind />\n            </StyledIconContainer>\n            <strong>思维导图</strong>\n          </Space>\n          <Space>\n            <Button type=\"primary\" onClick={save}>\n              保存\n            </Button>\n            <Button onClick={saveAndExit}>保存并退出</Button>\n          </Space>\n        </StyledHeader>\n      }\n      footer={null}>\n      <StyledMindEditorContainer>\n        {loading && <Loading></Loading>}\n        {error && <span>{(error && error.message) || \"未知错误\"}</span>}\n\n        <StyledToolbarContainer>\n          <Toolbar editor={editor} mind={mind} />\n        </StyledToolbarContainer>\n\n        {!loading && !error ? (\n          <div\n            style={{ height: \"100%\", maxHeight: \"100%\", overflow: \"hidden\" }}\n            ref={renderMindEditor}></div>\n        ) : null}\n      </StyledMindEditorContainer>\n    </Modal>\n  );\n};\n","import { Editor } from \"@tiptap/core\";\nimport React, {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState\n} from \"react\";\nimport scrollIntoView from \"scroll-into-view-if-needed\";\nimport styled from \"styled-components\";\n\nimport { SlashMenuItem } from \"./slash\";\n\ninterface IProps {\n  editor: Editor;\n  items: SlashMenuItem[];\n  command: (command) => void;\n}\n\nconst StyledContainer = styled.div`\n  width: 254px;\n  max-height: 240px;\n  overflow: auto;\n\n  box-shadow: ${props => props.theme.slashMenuBoxshadow};\n  background-color: ${props => props.theme.background};\n  border-radius: ${props => props.theme.borderRadius};\n`;\n\nconst StyledTitle = styled.div`\n  padding: 8px 16px;\n\n  color: ${props => props.theme.slashMenuTitleColor};\n`;\n\nconst StyledItem = styled.div<{ active: boolean }>`\n  display: flex;\n  justify-content: space-between;\n\n  padding: 8px 16px;\n  height: 32px;\n  color: ${props => props.theme.slashMenuColor};\n\n  background-color: ${props =>\n    props.active ? props.theme.slashMenuHoverBgColor : \"transparent\"};\n\n  cursor: pointer;\n\n  &:hover {\n    background-color: ${props => props.theme.slashMenuHoverBgColor};\n  }\n\n  > div {\n    display: flex;\n    align-items: center;\n  }\n`;\n\nconst StyledText = styled.div`\n  margin-left: 8px;\n`;\n\nconst StyledSlash = styled.div`\n  color: ${props => props.theme.slashMenuTitleColor};\n`;\n\nexport const SlashMenuView: React.FC<IProps> = forwardRef((props, ref) => {\n  const $container = useRef<HTMLDivElement>(null);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const selectItem = index => {\n    const command = props.items[index];\n\n    if (command) {\n      props.command(command);\n    }\n  };\n\n  const upHandler = () => {\n    setSelectedIndex(\n      (selectedIndex + props.items.length - 1) % props.items.length\n    );\n  };\n\n  const downHandler = () => {\n    setSelectedIndex((selectedIndex + 1) % props.items.length);\n  };\n\n  const enterHandler = () => {\n    selectItem(selectedIndex);\n  };\n\n  useEffect(() => setSelectedIndex(0), [props.items]);\n\n  useEffect(() => {\n    if (Number.isNaN(selectedIndex + 1)) return;\n    const el = $container?.current?.querySelector(\n      `.slash-menu-item:nth-of-type(${selectedIndex + 1})`\n    );\n    el && scrollIntoView(el, { behavior: \"smooth\", scrollMode: \"if-needed\" });\n  }, [selectedIndex]);\n\n  useImperativeHandle(ref, () => ({\n    onKeyDown: ({ event }) => {\n      if (event.key === \"ArrowUp\") {\n        upHandler();\n        return true;\n      }\n\n      if (event.key === \"ArrowDown\") {\n        downHandler();\n        return true;\n      }\n\n      if (event.key === \"Enter\") {\n        enterHandler();\n        return true;\n      }\n\n      return false;\n    }\n  }));\n\n  return (\n    <StyledContainer ref={$container}>\n      {props.items.length ? (\n        props.items.map((item, index) => {\n          return \"divider\" in item ? (\n            <StyledTitle className=\"slash-menu-item\">{item.title}</StyledTitle>\n          ) : (\n            <StyledItem\n              className=\"slash-menu-item\"\n              active={selectedIndex === index}\n              onClick={() => selectItem(index)}>\n              <div>\n                {item.icon}\n                <StyledText>{item.text}</StyledText>\n              </div>\n              <div>\n                <StyledSlash>{item.slash}</StyledSlash>\n              </div>\n            </StyledItem>\n          );\n        })\n      ) : (\n        <StyledTitle>没有找到结果</StyledTitle>\n      )}\n    </StyledContainer>\n  );\n});\n\nSlashMenuView.displayName = \"SlashMenuView\";\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { NodeViewWrapper, NodeViewProps } from \"@tiptap/react\";\nimport styled from \"styled-components\";\n\nimport { getEditorProvider } from \"../../editor/provider\";\nimport { Input, Popover, Space, Tag } from \"../../components\";\nimport { IconCheck } from \"../../icons\";\n\nconst StyledTag = styled.span`\n  font-size: 12px;\n  line-height: 16px;\n  padding: 2px 4px;\n  border-radius: ${props => props.theme.borderRadius};\n  vertical-align: text-top;\n  cursor: pointer;\n`;\n\nexport const STATUS_COLORS: Array<[string, string, string, string]> = [\n  // 按钮背景 文字颜色 背景颜色 边框颜色\n  [\"rgb(223, 225, 230)\", \"#42526E\", \"#DFE1E6\", \"rgb(80, 95, 121)\"],\n  [\"rgb(234, 230, 255)\", \"#403294\", \"#EAE6FF\", \"rgb(82, 67, 170)\"],\n  [\"rgb(222, 235, 255)\", \"#0747A6\", \"#DEEBFF\", \"rgb(0, 82, 204)\"],\n  [\"rgb(255, 235, 230)\", \"#BF2600\", \"#FFECE6\", \"rgb(222, 53, 11)\"],\n  [\"rgb(255, 240, 179)\", \"#172B4D\", \"#FFF0B3\", \"rgb(255, 153, 31)\"],\n  [\"rgb(227, 252, 239)\", \"#006644\", \"#E3FCEF\", \"rgb(0, 135, 90)\"]\n];\n\nexport const StatusView: React.FC<NodeViewProps> = ({\n  editor,\n  node,\n  updateAttributes\n}) => {\n  const isEditable = editor.isEditable;\n  const {\n    createUserId,\n    showPickerOnCreate,\n    color,\n    bgcolor,\n    borderColor,\n    text\n  } = node.attrs;\n\n  const ref = useRef<HTMLInputElement>(null);\n  const [visible, toggleVisible] = useState(false);\n  const [currentColor, setCurrentColor] = useState(color);\n  const [currentBgColor, setCurrentBgColor] = useState(bgcolor);\n  const [currentBorderColor, setCurrentBorderColorColor] = useState(\n    borderColor\n  );\n  const [currentText, setCurrentText] = useState(text);\n\n  const content = (\n    <StyledTag\n      style={{\n        backgroundColor: currentBgColor,\n        border: `1px solid ${currentBorderColor}`\n      }}\n      onClick={() => toggleVisible(true)}>\n      <span style={{ color: currentColor }}>\n        {currentText || \"请设置状态内容\"}\n      </span>\n    </StyledTag>\n  );\n\n  const setColor = useCallback(\n    (color: typeof STATUS_COLORS[0]) => () => {\n      setCurrentColor(color[1]);\n      setCurrentBgColor(color[2]);\n      setCurrentBorderColorColor(color[3]);\n    },\n    [updateAttributes]\n  );\n\n  const onVisibleChange = useCallback(\n    (value: boolean) => {\n      toggleVisible(value);\n\n      if (!value) {\n        updateAttributes({\n          showPickerOnCreate: false,\n          color: currentColor,\n          bgcolor: currentBgColor,\n          borderColor: currentBorderColor,\n          text: currentText\n        });\n      }\n    },\n    [currentColor, currentBgColor, currentBorderColor, currentText]\n  );\n\n  useEffect(() => {\n    const editorProvider = getEditorProvider(editor);\n    const currentUser = editorProvider.userProvider.getCurrentUser();\n\n    if (showPickerOnCreate && currentUser && currentUser.id === createUserId) {\n      toggleVisible(true);\n      setTimeout(() => ref.current?.focus(), 200);\n    }\n  }, [editor, updateAttributes, showPickerOnCreate, createUserId]);\n\n  useEffect(() => {\n    if (visible) {\n      setTimeout(() => {\n        ref.current?.focus();\n      }, 200);\n    }\n  }, [visible]);\n\n  return (\n    <NodeViewWrapper as=\"span\">\n      {isEditable ? (\n        <Popover\n          showArrow\n          position=\"bottomLeft\"\n          trigger={\"custom\"}\n          visible={visible}\n          onVisibleChange={onVisibleChange}\n          onClickOutSide={() => {\n            onVisibleChange(false);\n          }}\n          content={\n            <div style={{ width: 184, height: 65 }}>\n              <div style={{ marginBottom: 8 }}>\n                <Input\n                  ref={ref}\n                  placeholder=\"输入状态\"\n                  value={currentText}\n                  onChange={setCurrentText}\n                />\n              </div>\n              <Space>\n                {STATUS_COLORS.map(color => {\n                  return (\n                    <Tag\n                      key={color[0]}\n                      style={{\n                        width: 24,\n                        height: 24,\n                        cursor: \"pointer\",\n                        background: color[0],\n                        border: `1px solid ${color[3]}`\n                      }}\n                      type=\"solid\"\n                      onClick={setColor(color)}>\n                      {currentColor === color[1] ? (\n                        <IconCheck style={{ color: color[1] }} />\n                      ) : null}\n                    </Tag>\n                  );\n                })}\n              </Space>\n            </div>\n          }>\n          {content}\n        </Popover>\n      ) : (\n        content\n      )}\n    </NodeViewWrapper>\n  );\n};\n","import React, { forwardRef } from \"react\";\nimport styled from \"styled-components\";\n\nexport type IconProps = {\n  style?: React.CSSProperties;\n  onClick?: () => void;\n  svg: React.ReactNode;\n};\n\nconst DEFAULT_EMPTY_STYLE = {};\n\nconst StyledSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n`;\n\nexport const Icon = forwardRef<HTMLSpanElement, IconProps>(\n  ({ style = DEFAULT_EMPTY_STYLE, svg }, ref) => {\n    return (\n      <StyledSpan ref={ref} style={style}>\n        {svg}\n      </StyledSpan>\n    );\n  }\n);\n\nexport const buildIcon = (svg: IconProps[\"svg\"]) =>\n  forwardRef<HTMLSpanElement, Omit<IconProps, \"svg\">>((props, ref) => (\n    <Icon ref={ref} svg={svg} {...props}></Icon>\n  ));\n","import styled from \"styled-components\";\n\nexport const StyledEditor = styled.div`\n  box-sizing: border-box;\n  color: ${props => props.theme.text};\n  background: ${props => props.theme.background};\n  font-family: ${props => props.theme.fontFamily};\n  font-weight: ${props => props.theme.fontWeight};\n  font-size: 1em;\n  line-height: 1.7em;\n  width: 100%;\n  padding: 0 12px;\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  > div {\n    position: relative;\n  }\n\n  .ProseMirror {\n    position: relative;\n    outline: none;\n    word-wrap: break-word;\n    white-space: pre-wrap;\n    white-space: break-spaces;\n    -webkit-font-variant-ligatures: none;\n    font-variant-ligatures: none;\n  }\n\n  .ProseMirror-hideselection *::selection {\n    background: transparent;\n  }\n\n  .ProseMirror-hideselection {\n    caret-color: transparent;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    position: relative;\n    margin: 1em 0 0.5em;\n    font-weight: 500;\n    cursor: text;\n\n    &:not([data-placeholder]):before {\n      display: inline-block;\n      font-family: ${props => props.theme.fontFamilyMono};\n      color: ${props => props.theme.textSecondary};\n      font-size: 13px;\n      line-height: 0;\n      margin-left: -24px;\n      transition: opacity 150ms ease-in-out;\n      opacity: 0;\n      width: 24px;\n    }\n\n    &:hover,\n    &:focus-within {\n      .heading-actions {\n        opacity: 1;\n      }\n    }\n  }\n\n  .heading-anchor,\n  .heading-fold {\n    display: inline-block;\n    color: ${props => props.theme.text};\n    opacity: 0.75;\n    cursor: pointer;\n    background: none;\n    outline: none;\n    border: 0;\n    margin: 0;\n    padding: 0;\n    text-align: left;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 14px;\n    line-height: 0;\n    width: 12px;\n    height: 24px;\n\n    &:focus,\n    &:hover {\n      opacity: 1;\n    }\n  }\n\n  .heading-actions {\n    opacity: 0;\n    background: ${props => props.theme.background};\n    flex-direction: row;\n    display: inline-flex;\n    position: absolute;\n    top: -2px;\n    left: -16px;\n    height: 24px;\n\n    &.collapsed {\n      opacity: 1;\n    }\n\n    &.collapsed .heading-anchor {\n      opacity: 0;\n    }\n\n    &.collapsed .heading-fold {\n      opacity: 1;\n    }\n  }\n\n  .heading-fold {\n    display: inline-block;\n    transform-origin: center;\n    padding: 0;\n\n    &.collapsed {\n      transform: rotate(-90deg);\n      transition-delay: 0.1s;\n      opacity: 1;\n    }\n  }\n\n  .folded-content {\n    display: none;\n  }\n\n  p {\n    margin: 0;\n\n    span:first-child + br:last-child {\n      display: none;\n    }\n  }\n\n  blockquote {\n    position: relative;\n    margin: 0.5em 0;\n    padding-left: 1em;\n    border-left: 2px solid ${props => props.theme.blockquoteBorderColor};\n    color: ${props => props.theme.blockquoteTextColor};\n  }\n\n  hr {\n    position: relative;\n    height: 1em;\n    border: 0;\n  }\n\n  hr:before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    border-top: 1px solid ${props => props.theme.horizontalRule};\n    top: 0.5em;\n    left: 0;\n    right: 0;\n  }\n\n  iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n  }\n\n  /* S List */\n  ol,\n  ul {\n    margin: 0;\n    padding-left: 18px;\n\n    p {\n      margin: 0;\n    }\n  }\n\n  li > ul,\n  li > ol,\n  ul > ul,\n  ol > ol {\n    margin-top: 0;\n  }\n\n  ul {\n    list-style-type: disc;\n  }\n\n  ol,\n  ol ol ol ol,\n  ol ol ol ol ol ol ol,\n  ol ol ol ol ol ol ol ol ol ol {\n    list-style-type: decimal;\n  }\n\n  ol ol,\n  ol ol ol ol ol,\n  ol ol ol ol ol ol ol ol,\n  ol ol ol ol ol ol ol ol ol ol ol {\n    list-style-type: lower-alpha;\n  }\n\n  ol ol ol,\n  ol ol ol ol ol ol,\n  ol ol ol ol ol ol ol ol ol,\n  ol ol ol ol ol ol ol ol ol ol ol ol {\n    list-style-type: lower-roman;\n  }\n\n  ul[data-type=\"taskList\"] {\n    padding: 0;\n    list-style: none;\n\n    li {\n      position: relative;\n      display: flex;\n      align-items: center;\n      padding-left: 16px;\n      cursor: pointer;\n\n      > label {\n        position: absolute;\n        top: 6px;\n        left: 0;\n        display: block;\n        width: 16px;\n        height: 16px;\n        background-color: #fff;\n        border: 1px solid var(--semi-color-border);\n        border-radius: 2px;\n\n        > input {\n          display: none;\n        }\n\n        &::after {\n          position: absolute;\n          top: -0.357143px;\n          left: 4.071429px;\n          width: 6.714286px;\n          height: 12.142857px;\n          border: 2px solid #fff;\n          content: \" \";\n          opacity: 0;\n          transform: rotate(45deg) scale(0);\n          border-top: 0;\n          border-left: 0;\n          transition: all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6),\n            opacity 0.1s;\n        }\n      }\n\n      > div {\n        flex: 1 1 auto;\n        padding-left: 0.5rem;\n      }\n\n      &[data-checked=\"true\"] {\n        color: var(--semi-color-text-2);\n\n        > label {\n          background-color: var(--semi-color-primary);\n\n          &::after {\n            opacity: 1;\n            transform: rotate(45deg) scale(1);\n          }\n        }\n\n        > div {\n          p {\n            text-decoration: line-through;\n          }\n        }\n      }\n    }\n  }\n  /* E List */\n\n  /* S Table */\n  .tableWrapper {\n    position: relative;\n    margin: 0.5em 0px;\n\n    &.has-focus {\n      .scrollWrapper {\n        margin-top: -20px;\n      }\n    }\n  }\n\n  .scrollWrapper {\n    overflow-y: hidden;\n    overflow-x: auto;\n    padding-left: 28px;\n    padding-top: 28px;\n    padding-bottom: 8px;\n    margin-left: -28px;\n    margin-top: -20px;\n    margin-bottom: -8px;\n    border-left: 1px solid transparent;\n    border-right: 1px solid transparent;\n    -webkit-transition: border 250ms ease-in-out 0s;\n    transition: border 250ms ease-in-out 0s;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    border-radius: 4px;\n    overflow: auto;\n\n    box-sizing: border-box;\n\n    * {\n      box-sizing: border-box;\n    }\n\n    tr {\n      position: relative;\n      border-bottom: 1px solid ${props => props.theme.tableBorderColor};\n    }\n\n    th {\n      background: ${props => props.theme.tableHeaderBgColor};\n    }\n\n    td,\n    th {\n      position: relative;\n      vertical-align: top;\n      border: 1px solid ${props => props.theme.tableBorderColor};\n      position: relative;\n      padding: 4px 8px;\n      text-align: left;\n      min-width: 100px;\n    }\n\n    .selectedCell {\n      position: relative;\n      border: 1px solid ${props => props.theme.tableSelectedBorderColor};\n      background-color: ${props => props.theme.tableSelectedCellBgColor};\n\n      &::after {\n        box-sizing: content-box;\n        height: 100%;\n        width: 100%;\n        border: 1px solid ${props => props.theme.tableSelectedBorderColor};\n        content: \"\";\n        position: absolute;\n        left: -1px;\n        top: -1px;\n        bottom: 0px;\n        z-index: 12;\n        display: inline-block;\n        pointer-events: none;\n      }\n    }\n\n    .grip-column {\n      position: absolute;\n      top: -12px;\n      left: -1px;\n      width: 100%;\n\n      font-size: 0;\n\n      > span {\n        position: absolute;\n        top: -18px;\n        left: 100%;\n        transform: translateX(-8px);\n\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n      }\n\n      &::before {\n        content: \"\";\n        position: absolute;\n        left: 100%;\n        bottom: 4px;\n        transform: translateX(-1px);\n\n        width: 4px;\n        height: 4px;\n        background-color: ${props => props.theme.tableBorderColor};\n        border-radius: 50%;\n        display: block;\n      }\n\n      &::after {\n        box-sizing: content-box;\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 10px;\n        background: ${props => props.theme.tableHeaderBgColor};\n        border: 1px solid ${props => props.theme.tableBorderColor};\n        display: block;\n      }\n\n      &:hover {\n        font-size: 14px;\n        color: ${props => props.theme.tableSelectedBorderColor};\n\n        &::before {\n          display: none;\n        }\n\n        &::after {\n          background: ${props => props.theme.tableSelectedControlBgColor};\n          border-color: ${props => props.theme.tableSelectedControlBgColor};\n        }\n      }\n\n      &.last::after {\n        border-top-right-radius: 3px;\n      }\n\n      &.selected::after {\n        background: ${props => props.theme.tableSelectedControlBgColor};\n        border-color: ${props => props.theme.tableSelectedControlBgColor};\n      }\n    }\n\n    .grip-row {\n      position: absolute;\n      left: -12px;\n      top: -1px;\n      height: 100%;\n      font-size: 0;\n\n      > span {\n        transform: translateY(8px);\n        position: absolute;\n        left: -16px;\n        bottom: 4px;\n\n        display: inline-block;\n        width: 16px;\n        height: 16px;\n      }\n\n      &::before {\n        content: \"\";\n        position: absolute;\n        left: -10px;\n        bottom: -2px;\n        width: 4px;\n        height: 4px;\n        background-color: ${props => props.theme.tableBorderColor};\n        border-radius: 50%;\n        display: block;\n      }\n\n      &::after {\n        box-sizing: content-box;\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100%;\n        width: 10px;\n        background: ${props => props.theme.tableHeaderBgColor};\n        border: 1px solid ${props => props.theme.tableBorderColor};\n        display: block;\n      }\n\n      &:hover {\n        font-size: 14px;\n        color: ${props => props.theme.tableSelectedBorderColor};\n\n        &::before {\n          display: none;\n        }\n\n        &::after {\n          background: ${props => props.theme.tableSelectedControlBgColor};\n          border-color: ${props => props.theme.tableSelectedBorderColor};\n        }\n      }\n\n      &.last::after {\n        border-bottom-left-radius: 3px;\n      }\n\n      &.selected::after {\n        background: ${props => props.theme.tableSelectedControlBgColor};\n        border-color: ${props => props.theme.tableSelectedBorderColor};\n      }\n    }\n\n    .grip-table {\n      &::after {\n        box-sizing: content-box;\n        content: \"\";\n        cursor: pointer;\n        position: absolute;\n        top: -12px;\n        left: -12px;\n        display: block;\n        background: ${props => props.theme.tableHeaderBgColor};\n        width: 10px;\n        height: 10px;\n        border: 1px solid ${props => props.theme.tableBorderColor};\n        border-top-left-radius: 3px;\n      }\n\n      &:hover::after {\n        background: ${props => props.theme.tableSelectedControlBgColor};\n        border-color: ${props => props.theme.tableSelectedBorderColor};\n      }\n\n      &.selected::after {\n        background: ${props => props.theme.tableSelectedControlBgColor};\n        border-color: ${props => props.theme.tableSelectedBorderColor};\n      }\n    }\n  }\n\n  .column-resize-handle {\n    position: absolute;\n    top: 0;\n    right: -2px;\n    bottom: -2px;\n    width: 4px;\n    pointer-events: none;\n    background-color: ${props => props.theme.tableResizeHandleBgColor};\n  }\n\n  .resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize; /* stylelint-disable declaration-block-no-duplicate-properties */\n  }\n  /* E Table */\n\n  /* S Code */\n  code {\n    padding: 4px;\n    font-family: ${props => props.theme.fontFamilyMono};\n    font-size: 0.875rem;\n    line-height: 1.3;\n    cursor: text;\n    background-color: #f5f6f7;\n    border-radius: 4px;\n  }\n\n  pre {\n    position: relative;\n    display: flex;\n    min-width: 48px;\n    margin: 0;\n    line-height: 1.3;\n    background-color: #f5f6f7;\n    counter-reset: line 0;\n\n    code {\n      width: 100%;\n      padding: 0;\n      margin: 12px;\n      overflow: auto;\n      font-size: 0.875rem;\n      line-height: 1.5rem;\n      color: inherit;\n      white-space: pre;\n      background-color: transparent;\n      overscroll-behavior: contain;\n    }\n  }\n  /* E Code */\n\n  /* S ReactRenderer */\n  .react-renderer {\n    margin: 0.75em 0;\n    line-height: 0;\n  }\n  /* E ReactRenderer */\n\n  /* S Resizable */\n  .resizable {\n    position: relative;\n    display: inline-block;\n    max-width: 100%;\n    vertical-align: top;\n  }\n  /* E Resizable */\n\n  /* S Dragable */\n  [data-drag-handle] {\n    position: absolute;\n    z-index: 100;\n    display: inline;\n    width: 16px;\n    height: 16px;\n    cursor: move;\n    background-color: #fff;\n    opacity: 0;\n    transition: opacity 0.3s ease-out;\n    background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='1' width='3' height='3' rx='1.5' fill='%23111'/%3E%3Crect x='10' y='1' width='3' height='3' rx='1.5' fill='%23111'/%3E%3Crect x='3' y='6' width='3' height='3' rx='1.5' fill='%23111'/%3E%3Crect x='10' y='6' width='3' height='3' rx='1.5' fill='%23111'/%3E%3Crect x='3' y='11' width='3' height='3' rx='1.5' fill='%23111'/%3E%3Crect x='10' y='11' width='3' height='3' rx='1.5' fill='%23111'/%3E%3C/svg%3E\");\n    background-size: contain;\n    background-position: center 0;\n    background-repeat: no-repeat;\n\n    &.show {\n      opacity: 0.3;\n\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    &.hide {\n      opacity: 0;\n    }\n  }\n  /* E Dragable */\n\n  /* S Placeholder */\n  .is-empty {\n    position: relative;\n\n    &.has-focus {\n      &::before {\n        float: left;\n        height: 0;\n        color: #aaa;\n        pointer-events: none;\n        content: attr(data-placeholder);\n      }\n    }\n\n    &.node-codeBlock::before {\n      display: none;\n    }\n  }\n  /* E Placeholder */\n\n  .collaboration-cursor__caret {\n    position: relative;\n    border-left: 1px solid #0d0d0d;\n    margin-right: -1px;\n    margin-left: -1px;\n    word-break: normal;\n    pointer-events: none;\n    border-right: 1px solid #0d0d0d;\n  }\n\n  .collaboration-cursor__label {\n    position: absolute;\n    top: -1.4em;\n    left: -1px;\n    padding: 0.1rem 0.3rem;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 600;\n    line-height: normal;\n    color: #0d0d0d;\n    white-space: nowrap;\n    border-radius: 3px 3px 3px 0;\n    user-select: none;\n  }\n\n  .columns {\n    display: flex;\n    width: 100%;\n    gap: 8px;\n\n    .column {\n      min-width: 0;\n      padding: 12px;\n      border: 1px solid ${props => props.theme.borderColor};\n      border-radius: ${props => props.theme.borderRadius};\n      flex: 1 1 0%;\n      box-sizing: border-box;\n\n      p {\n        &:first-of-type {\n          margin-top: 0;\n        }\n      }\n    }\n  }\n\n  /* S Tooltip */\n  .tippy-box[data-animation=\"fade\"][data-state=\"hidden\"] {\n    opacity: 0;\n  }\n  [data-tippy-root] {\n    max-width: calc(100vw - 10px);\n  }\n  .tippy-box {\n    position: relative;\n    background-color: #333;\n    color: #fff;\n    border-radius: 4px;\n    font-size: 14px;\n    line-height: 1.4;\n    white-space: normal;\n    outline: 0;\n    transition-property: transform, visibility, opacity;\n  }\n  .tippy-box[data-theme~=\"bubble-menu\"] {\n    background-color: #fff;\n    padding: 0;\n    border: 1px solid ${props => props.theme.borderColor};\n    border-radius: 6px;\n    color: #333;\n  }\n  .tippy-box[data-placement^=\"top\"] > .tippy-arrow {\n    bottom: 0;\n  }\n  .tippy-box[data-placement^=\"top\"] > .tippy-arrow:before {\n    bottom: -7px;\n    left: 0;\n    border-width: 8px 8px 0;\n    border-top-color: initial;\n    transform-origin: center top;\n  }\n  .tippy-box[data-placement^=\"bottom\"] > .tippy-arrow {\n    top: 0;\n  }\n  .tippy-box[data-placement^=\"bottom\"] > .tippy-arrow:before {\n    top: -7px;\n    left: 0;\n    border-width: 0 8px 8px;\n    border-bottom-color: initial;\n    transform-origin: center bottom;\n  }\n  .tippy-box[data-placement^=\"left\"] > .tippy-arrow {\n    right: 0;\n  }\n  .tippy-box[data-placement^=\"left\"] > .tippy-arrow:before {\n    border-width: 8px 0 8px 8px;\n    border-left-color: initial;\n    right: -7px;\n    transform-origin: center left;\n  }\n  .tippy-box[data-placement^=\"right\"] > .tippy-arrow {\n    left: 0;\n  }\n  .tippy-box[data-placement^=\"right\"] > .tippy-arrow:before {\n    left: -7px;\n    border-width: 8px 8px 8px 0;\n    border-right-color: initial;\n    transform-origin: center right;\n  }\n  .tippy-box[data-inertia][data-state=\"visible\"] {\n    transition-timing-function: cubic-bezier(0.54, 1.5, 0.38, 1.11);\n  }\n  .tippy-arrow {\n    width: 16px;\n    height: 16px;\n    color: #333;\n  }\n  .tippy-arrow:before {\n    content: \"\";\n    position: absolute;\n    border-color: transparent;\n    border-style: solid;\n  }\n  .tippy-content {\n    position: relative;\n    padding: 4px 6px;\n    z-index: 1;\n\n    ul,\n    ol {\n      padding: 0;\n    }\n  }\n  .tippy-box[data-theme~=\"bubble-menu\"] .tippy-content {\n    overflow-x: auto;\n    overflow-y: visible;\n  }\n  .tippy-box[data-theme~=\"padding-0\"] .tippy-content {\n    padding: 0;\n  }\n  .tippy-box[data-theme~=\"padding-8\"] .tippy-content {\n    padding: 8px 12px;\n  }\n  .tippy-box[data-theme~=\"hidden\"] {\n    display: none;\n  }\n  /* E Tooltip */\n\n  /* S highlight */\n  .hljs {\n    color: #24292e;\n    background: #fff;\n  }\n\n  .hljs-doctag,\n  .hljs-keyword,\n  .hljs-meta .hljs-keyword,\n  .hljs-template-tag,\n  .hljs-template-variable,\n  .hljs-type,\n  .hljs-variable.language_ {\n    /* prettylights-syntax-keyword */\n    color: #d73a49;\n  }\n\n  .hljs-title,\n  .hljs-title.class_,\n  .hljs-title.class_.inherited__,\n  .hljs-title.function_ {\n    /* prettylights-syntax-entity */\n    color: #6f42c1;\n  }\n\n  .hljs-attr,\n  .hljs-attribute,\n  .hljs-literal,\n  .hljs-meta,\n  .hljs-number,\n  .hljs-operator,\n  .hljs-variable,\n  .hljs-selector-attr,\n  .hljs-selector-class,\n  .hljs-selector-id {\n    /* prettylights-syntax-constant */\n    color: #005cc5;\n  }\n\n  .hljs-regexp,\n  .hljs-string,\n  .hljs-meta .hljs-string {\n    /* prettylights-syntax-string */\n    color: #032f62;\n  }\n\n  .hljs-built_in,\n  .hljs-symbol {\n    /* prettylights-syntax-variable */\n    color: #e36209;\n  }\n\n  .hljs-comment,\n  .hljs-code,\n  .hljs-formula {\n    /* prettylights-syntax-comment */\n    color: #6a737d;\n  }\n\n  .hljs-name,\n  .hljs-quote,\n  .hljs-selector-tag,\n  .hljs-selector-pseudo {\n    /* prettylights-syntax-entity-tag */\n    color: #22863a;\n  }\n\n  .hljs-subst {\n    /* prettylights-syntax-storage-modifier-import */\n    color: #24292e;\n  }\n\n  .hljs-section {\n    font-weight: bold;\n\n    /* prettylights-syntax-markup-heading */\n    color: #005cc5;\n  }\n\n  .hljs-bullet {\n    /* prettylights-syntax-markup-list */\n    color: #735c0f;\n  }\n\n  .hljs-emphasis {\n    font-style: italic;\n\n    /* prettylights-syntax-markup-italic */\n    color: #24292e;\n  }\n\n  .hljs-strong {\n    font-weight: bold;\n\n    /* prettylights-syntax-markup-bold */\n    color: #24292e;\n  }\n\n  .hljs-addition {\n    /* prettylights-syntax-markup-inserted */\n    color: #22863a;\n    background-color: #f0fff4;\n  }\n\n  .hljs-deletion {\n    /* prettylights-syntax-markup-deleted */\n    color: #b31d28;\n    background-color: #ffeef0;\n  }\n  /* E highlight */\n\n  /* S Mind */\n  .km-view {\n    font-family: \"STHeitiSC-Light\", \"STHeiti\", \"Hei\", \"Heiti SC\",\n      \"Microsoft Yahei\", Arial, sans-serif;\n    -webkit-user-select: none;\n    user-select: none;\n    position: relative;\n  }\n\n  .km-view .km-receiver {\n    position: absolute;\n    left: -99999px;\n    top: -99999px;\n    width: 20px;\n    height: 20px;\n    outline: none;\n    margin: 0;\n  }\n\n  .km-view image {\n    cursor: zoom-in;\n  }\n\n  .km-image-viewer {\n    position: fixed;\n    z-index: 99999;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, 0.75);\n  }\n\n  .km-image-viewer .km-image-viewer-container {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    text-align: center;\n    white-space: nowrap;\n    overflow: auto;\n  }\n\n  .km-image-viewer .km-image-viewer-container::before {\n    content: \"\";\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    font-size: 0;\n    vertical-align: middle;\n  }\n\n  .km-image-viewer .km-image-viewer-container img {\n    cursor: zoom-out;\n    vertical-align: middle;\n  }\n\n  .km-image-viewer .km-image-viewer-container img.limited {\n    cursor: zoom-in;\n    max-width: 100%;\n    max-height: 100%;\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar {\n    z-index: 1;\n    background: rgba(0, 0, 0, 0.75);\n    text-align: right;\n    transition: all 0.25s;\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar.hidden {\n    transform: translate(0, -100%);\n    opacity: 0;\n  }\n\n  .km-image-viewer .km-image-viewer-btn {\n    cursor: pointer;\n    outline: 0;\n    border: 0;\n    width: 44px;\n    height: 44px;\n    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9Ijg4IiB2aWV3Qm94PSIwIDAgMjY0IDg4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZT5kZWZhdWx0LXNraW4gMjwvdGl0bGU+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Zz48cGF0aCBkPSJNNjcuMDAyIDU5LjV2My43NjhjLTYuMzA3Ljg0LTkuMTg0IDUuNzUtMTAuMDAyIDkuNzMyIDIuMjItMi44MyA1LjU2NC01LjA5OCAxMC4wMDItNS4wOThWNzEuNUw3MyA2NS41ODUgNjcuMDAyIDU5LjV6IiBpZD0iU2hhcGUiIGZpbGw9IiNmZmYiLz48ZyBmaWxsPSIjZmZmIj48cGF0aCBkPSJNMTMgMjl2LTVoMnYzaDN2MmgtNXpNMTMgMTVoNXYyaC0zdjNoLTJ2LTV6TTMxIDE1djVoLTJ2LTNoLTN2LTJoNXpNMzEgMjloLTV2LTJoM3YtM2gydjV6IiBpZD0iU2hhcGUiLz48L2c+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTYyIDI0djVoLTJ2LTNoLTN2LTJoNXpNNjIgMjBoLTV2LTJoM3YtM2gydjV6TTcwIDIwdi01aDJ2M2gzdjJoLTV6TTcwIDI0aDV2MmgtM3YzaC0ydi01eiIvPjwvZz48cGF0aCBkPSJNMjAuNTg2IDY2bC01LjY1Ni01LjY1NiAxLjQxNC0xLjQxNEwyMiA2NC41ODZsNS42NTYtNS42NTYgMS40MTQgMS40MTRMMjMuNDE0IDY2bDUuNjU2IDUuNjU2LTEuNDE0IDEuNDE0TDIyIDY3LjQxNGwtNS42NTYgNS42NTYtMS40MTQtMS40MTRMMjAuNTg2IDY2eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMTEuNzg1IDY1LjAzTDExMCA2My41bDMtMy41aC0xMHYtMmgxMGwtMy0zLjUgMS43ODUtMS40NjhMMTE3IDU5bC01LjIxNSA2LjAzeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xNTIuMjE1IDY1LjAzTDE1NCA2My41bC0zLTMuNWgxMHYtMmgtMTBsMy0zLjUtMS43ODUtMS40NjhMMTQ3IDU5bDUuMjE1IDYuMDN6IiBmaWxsPSIjZmZmIi8+PGc+PHBhdGggaWQ9IlJlY3RhbmdsZS0xMSIgZmlsbD0iI2ZmZiIgZD0iTTE2MC45NTcgMjguNTQzbC0zLjI1LTMuMjUtMS40MTMgMS40MTQgMy4yNSAzLjI1eiIvPjxwYXRoIGQ9Ik0xNTIuNSAyN2MzLjAzOCAwIDUuNS0yLjQ2MiA1LjUtNS41cy0yLjQ2Mi01LjUtNS41LTUuNS01LjUgMi40NjItNS41IDUuNSAyLjQ2MiA1LjUgNS41IDUuNXoiIGlkPSJPdmFsLTEiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTUwIDIxaDV2MWgtNXoiLz48L2c+PGc+PHBhdGggZD0iTTExNi45NTcgMjguNTQzbC0xLjQxNCAxLjQxNC0zLjI1LTMuMjUgMS40MTQtMS40MTQgMy4yNSAzLjI1eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMDguNSAyN2MzLjAzOCAwIDUuNS0yLjQ2MiA1LjUtNS41cy0yLjQ2Mi01LjUtNS41LTUuNS01LjUgMi40NjItNS41IDUuNSAyLjQ2MiA1LjUgNS41IDUuNXoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA2IDIxaDV2MWgtNXoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA5LjA0MyAxOS4wMDhsLS4wODUgNS0xLS4wMTcuMDg1LTV6Ii8+PC9nPjwvZz48L2c+PC9zdmc+);\n  }\n\n  .km-image-viewer .km-image-viewer-toolbar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n  }\n\n  .km-image-viewer .km-image-viewer-close {\n    background-position: 0 -44px;\n  }\n  /* E Mind */\n`;\n"],"names":[],"sourceRoot":""}